@model SubscriptionProductsModel
@{
    ViewBag.Title = "Manage Subscriptions";
    ViewBag.SubTitle = "Use this area to provide information to your customers about their subscriptions, what packages they are on, how to cancel and upgrade/downgrade.";
}
<div class="container">
    @if (Model.SaveMessage.IsSet())
    {
        <alert type="@Model.MessageType">@Model.SaveMessage</alert>
    }
    @if (Model.Products.Count() == 0)
    {
        <alert type="Warning">There are no subscription products added to the site yet.</alert>
    }
    else
    {
        foreach (var product in Model.Products)
        {
            <h3>
                <a asp-action="Product" asp-route-id="@product.Id" asp-route-title="@product.DisplayName.ToSeoUrl()">
                    @product.DisplayName
                </a>
            </h3>
            <hr />
            <div class="well bg-white">
                @if (User.IsSubscribedToProduct(product.Id))
                {
                    <partial name="_Subscriptions_CurrentInfo" model="User.GetActiveSubscription(product.Id)" />
                }
                else
                {
                    <div class="current-subscription">
                        <h4>You do not currently have a subscription.</h4>
                        <p>
                            You do not currently have an active paid package, but you can access your previous subscriptions and invoices here:
                        </p>
                        <p>
                            <a class="btn btn-sm btn-primary" asp-action="Product" asp-route-id="@product.Id" asp-route-title="@product.DisplayName.ToSeoUrl()">Get a package!</a>
                            <a class="btn btn-sm btn-default" href="/account/billing">Billing Information</a>
                        </p>
                    </div>
                }
            </div>
        }
    }
</div>
