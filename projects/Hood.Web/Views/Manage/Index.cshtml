@model IndexViewModel
@{
    ViewData["Title"] = "Manage your account";
    var integrations = _settings.GetIntegrationSettings();
}
@Html.Raw(ViewData["StatusMessage"])
<div class="row">
    <div class="col-sm-4">
        <ul class="nav nav-pills nav-stacked" role="tablist">
            <li role="presentation" class="active"><a href="#password" aria-controls="password" role="tab" data-toggle="tab">Password</a></li>
            <li role="presentation"><a href="#addresses" aria-controls="logins" role="tab" data-toggle="tab">Addresses</a></li>
            <li role="presentation"><a href="#logins" aria-controls="logins" role="tab" data-toggle="tab">External Logins</a></li>
            <li role="presentation"><a href="#roles" aria-controls="roles" role="tab" data-toggle="tab">Roles</a></li>
            <li role="presentation"><a href="#security" aria-controls="security" role="tab" data-toggle="tab">Security</a></li>
        </ul>
    </div>
    <div class="col-sm-8">
        <div class="tabs">
            <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="password">
                    <h4>Password</h4>
                    <hr class="m-b-lg" />
                    @if (Model.HasPassword)
                    {
                        <p>Your account has a local password set, you can change it here, simply click the button below to change your password.</p>
                        <a asp-controller="Manage" asp-action="ChangePassword" class="btn btn-md btn-default">Change Password</a>
                    }
                    else
                    {
                        <p>Your account does not have a local password set, you can add one here, then you can log into the site, without using your social media access token.</p>
                        <a asp-controller="Manage" asp-action="SetPassword" class="btn btn-md btn-default">Create Password</a>
                    }
                </div>
                <div role="tabpanel" class="tab-pane" id="addresses">
                    <span class="pull-right">
                        <a class="btn btn-success btn-xs add-new-address">Add new address <i class="fa fa-plus-circle"></i></a>
                    </span>
                    <h4>Your Addresses</h4>
                    <hr class="m-b-lg" />
                    <div class="hood-inline address-list" data-url="@Url.Action("Index", "Address")"></div>
                </div>
                <div role="tabpanel" class="tab-pane" id="logins">
                    <h4>External Logins (@Model.Logins.Count)</h4>
                    <hr class="m-b-lg" />
                    <p>You currently have the following social logins activated on this account:</p>
                    <ul>
                        @foreach (UserLoginInfo login in Model.Logins)
                        {
                            <li>@login.LoginProvider</li>
                        }
                    </ul>
                    <p>To manage your external logins please click the 'Manage Social Logins' button below.</p>
                    <a asp-controller="Manage" asp-action="ManageLogins" class="btn btn-md btn-default">Manage Social Logins</a>
                </div>
                <div role="tabpanel" class="tab-pane" id="roles">
                    <h4>Roles</h4>
                    <hr class="m-b-lg" />
                    <p>You are currenty in the following roles:</p>
                    <ul>
                        @foreach (string role in Model.Roles)
                        {
                            <li>@role</li>
                        }
                    </ul>
                </div>
                <div role="tabpanel" class="tab-pane" id="security">
                    <h4>Two-Factor Authentication</h4>
                    <hr class="m-b-lg" />
                    @if (Model.TwoFactor)
                    {
                        <form asp-controller="Manage" asp-action="DisableTwoFactorAuthentication" method="post" class="form-horizontal">

                            Enabled [<button type="submit" class="btn-link btn-bracketed">Disable</button>]
                        </form>
                    }
                    else
                    {
                        <form asp-controller="Manage" asp-action="EnableTwoFactorAuthentication" method="post" class="form-horizontal">
                            Disabled [<button type="submit" class="btn-link btn-bracketed">Enable</button>]
                        </form>
                    }
                    <hr class="m-lg" />
                    <h5>Phone Number:</h5>
                    <p>
                        Phone Numbers can used as a second factor of verification in two-factor authentication.
                        See <a href="http://go.microsoft.com/fwlink/?LinkID=532713">this article</a>
                        for details on setting up this ASP.NET application to support two-factor authentication using SMS.
                    </p>
                    @(Model.PhoneNumber ?? "None")
                    @if (Model.PhoneNumber != null)
                    {
                        <a asp-controller="Manage" asp-action="AddPhoneNumber" class="btn-bracketed">Change</a>
                        <form asp-controller="Manage" asp-action="RemovePhoneNumber" method="post">
                            [<button type="submit" class="btn-link">Remove</button>]
                        </form>
                    }
                    else
                    {
                        <a asp-controller="Manage" asp-action="AddPhoneNumber" class="btn-bracketed">Add</a>
                    }
                </div>
            </div>
        </div>
    </div>
</div>
