"use strict";function initGoogleMapsComplete(){$("#address-autocomplete").length>0&&$.hood.Google.Addresses.InitAutocomplete(),$.hood.Google.Maps(),$.hood.Google.ClusteredMap();try{initMap()}catch(e){$.noop()}}var console={};console.log=function(){},window.console=console,$.hood||($.hood={}),$.body=$("body");var console=window.console||{};console.log=console.log||function(){},console.warn=console.warn||function(){},console.error=console.error||function(){},console.info=console.info||function(){},$.fn.exists=function(){return $(this).length},$.fn.doesExist=function(){return $(this).length},$.fn.restrictToSlug=function(e){var o=$(this),t=e||/[^0-9a-zA-Z]*/g,n=function(){var e=$(this).val(),o=e.replace(t,"");e!==o&&$(this).val(o)};o.on("keyup",n),o.on("paste",n),o.on("change",n)},$(".restrict-to-slug").restrictToSlug(),$.fn.restrictToPageSlug=function(e){var o=$(this),t=e||/[^0-9a-zA-Z-\/\/]*/g,n=function(){var e=$(this).val(),o=e.replace(t,"");if((o.match(new RegExp("/","g"))||[]).length>4){var n=o.lastIndexOf("/");o=o.substring(0,n)+o.substring(n+1),$.hood.Alerts.Warning("You can only have up to 4 '/' characters in a url slug.")}e!==o&&$(this).val(o)};o.on("keyup",n),o.on("paste",n),o.on("change",n)},$(".restrict-to-page-slug").restrictToPageSlug(),$.fn.restrictToMetaSlug=function(e){var o=$(this),t=e||/[^0-9a-zA-Z.]*/g,n=function(){var e=$(this).val(),o=e.replace(t,"");if((o.match(new RegExp(".","g"))||[]).length>1){var n=o.lastIndexOf(".");o=o.substring(0,n)+o.substring(n+1),$.hood.Alerts.Warning("You can only have up to 1 '.' characters in a meta slug.")}e!==o&&$(this).val(o)};o.on("keyup",n),o.on("paste",n),o.on("change",n)},$(".restrict-to-meta-slug").restrictToMetaSlug(),$.fn.characterCounter=function(e){var o=$(this),t=function(){var e=$(this).data("counter"),o=Number($(this).attr("maxlength")),t=$(this).val().length;$(e).text(o-t);var n="text-success";o-t<o/10&&(n="text-danger"),$(e).parent().removeClass("text-success").removeClass("text-danger").addClass(n)};o.on("keyup",t),o.on("paste",t),o.on("change",t)},$(".character-counter").characterCounter(),$(".character-counter").trigger("change"),$.fn.addLoader=function(){$(this).data("loadercontent",$(this).html()),$(this).addClass("loading").append('<i class="fa fa-refresh fa-spin m-l-sm"></i>')},$.fn.removeLoader=function(){$(this).empty().html($(this).data("loadercontent")),$(this).removeClass("loading")},$.fn.warningAlert=function(){var e=$(this),o=function(e){e.preventDefault();var o=function(o){if(o){var t=$(e.currentTarget).attr("href");window.location=t}};return $.hood.Alerts.Confirm($(e.currentTarget).data("warning"),$(e.currentTarget).data("title"),o,"warning",$(e.currentTarget).data("footer"),"Ok","Cancel"),!1};e.on("click",o)},$(".warning-alert").warningAlert(),$.commonHeight=function(e,o){var t=0;e.children(o).each(function(){var e=$(this).children();e.hasClass("max-height")?t=e.outerHeight():e.outerHeight()>t&&(t=e.outerHeight())}),e.children(o).each(function(){$(this).height(t)})},$.loadCss=function(e,o){$("link#"+e).length||$("<link/>",{id:e,rel:"stylesheet",type:"text/css",href:o}).appendTo("head")},$.getUrlVars=function(){for(var e,o=[],t=window.location.href.slice(window.location.href.indexOf("?")+1).split("&"),n=0;n<t.length;n++)e=t[n].split("="),o.push(e[0]),o[e[0]]=e[1];return o},$.decodeUrl=function(e){return decodeURIComponent(e).replace("+"," ")},$.numberWithCommas=function(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")},$.validator&&($.validator.addMethod("time",function(e,o){return this.optional(o)||/^(([0-1]?[0-9])|([2][0-3])):([0-5]?[0-9])(:([0-5]?[0-9]))?$/i.test(e)},"Please enter a valid time."),$.validator.addMethod("ukdate",function(e,o){return e.match(/^\d\d?\/\d\d?\/\d\d\d\d$/)},"Please enter a date in the format dd/mm/yyyy.")),$.mobile={Android:function(){return navigator.userAgent.match(/Android/i)},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)},Opera:function(){return navigator.userAgent.match(/Opera Mini/i)},Windows:function(){return navigator.userAgent.match(/IEMobile/i)},Any:function(){return $.mobile.Android()||$.mobile.BlackBerry()||$.mobile.iOS()||$.mobile.Opera()||$.mobile.Windows()}},$.mobile.Android?$.mobile.BlackBerry?$.mobile.iOS?$.mobile.Opera?$.mobile.Windows?($.body.addClass("desktop-device"),$.device="desktop"):($.body.addClass("windows-device"),$.device="windows"):($.body.addClass("opera-device"),$.device="opera"):($.body.addClass("ios-device"),$.device="ios"):($.body.addClass("blackberry-device"),$.device="blackberry"):($.body.addClass("android-device"),$.device="android"),function(){var e={password:"0",username:"0"};$("body").on("change",".prevent-autocomplete",function(o){var t=$(this).attr("id");"0"!==e[t]&&e[t]===$(this).val()||$(this).val("")}),$("body").on("keyup",".prevent-autocomplete",function(o){var t=$(this).attr("id");e[t]=$(this).val()})}(),function(){function e(e,o){o=o||{bubbles:!1,cancelable:!1,detail:void 0};var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,o.bubbles,o.cancelable,o.detail),t}return"function"!=typeof window.CustomEvent&&(e.prototype=window.Event.prototype,void(window.CustomEvent=e))}(),$.hood.LinkClasses=[{title:"None",value:""},{title:"Button link",value:"btn btn-default"},{title:"Theme coloured button link",value:"btn btn-primary"},{title:"Popup image/video",value:"colorbox-iframe"},{title:"Button popup link",value:"btn btn-default colorbox-iframe"},{title:"Theme coloured button popup link",value:"btn btn-primary colorbox-iframe"},{title:"Large link",value:"font-lg"},{title:"Large button link",value:"btn btn-default btn-lg"},{title:"Large theme coloured button link",value:"btn btn-primary btn-lg"},{title:"Large popup image/video",value:"font-lg colorbox-iframe"},{title:"Large Button popup link",value:"btn btn-default btn-lg colorbox-iframe"},{title:"Theme coloured button popup link",value:"btn btn-primary btn-lg colorbox-iframe"}],$.hood.ImageClasses=[{title:"None",value:""},{title:"Full Width",value:"user-image full"},{title:"Left Aligned",value:"user-image left"},{title:"Centered",value:"user-image center"},{title:"Right Aligned",value:"user-image right"},{title:"Inline with text, top aligned",value:"user-image inline top"},{title:"Inline with text, middle aligned",value:"user-image inline"},{title:"Inline with text, bottom aligned",value:"user-image inline bottom"},{title:"Pulled Left",value:"user-image pull-left"},{title:"Pulled Right",value:"user-image pull-right"}],new CustomEvent("loader-show"),new CustomEvent("loader-hide"),$.hood.Loader=function(e){e?$("body").trigger("loader-show"):$("body").trigger("loader-hide")},$.hood||($.hood={}),$.hood.Helpers={IsNullOrUndefined:function(e){var o=!1;return null!==e&&"undefined"!=typeof e&&""!==e||(o=!0),o},IsSet:function(e){var o=!1;return null!==e&&"undefined"!=typeof e&&""!==e||(o=!0),!o},IsEventSupported:function(e){var o=document.createElement("div");e="on"+e;var t=e in o;return t||(o.setAttribute(e,"return;"),t="function"==typeof o[e]),o=null,t},IsFunction:function(e){return e&&"[object Function]"==={}.toString.call(e)},IsUrlExternal:function(e){var o=e.match(/^([^:\/?#]+:)?(?:\/\/([^\/?#]*))?([^?#]+)?(\?[^#]*)?(#.*)?/);return"string"==typeof o[1]&&o[1].length>0&&o[1].toLowerCase()!==location.protocol||"string"==typeof o[2]&&o[2].length>0&&o[2].replace(new RegExp(":("+{"http:":80,"https:":443}[location.protocol]+")?$"),"")!==location.host},IsInIframe:function(){try{return window.self!==window.top}catch(e){return!0}},HtmlEncode:function(e){return $("<div/>").text(e).html()},HtmlDecode:function(e){return $("<div/>").html(e).text()},FormatCurrency:function(e,o){return o+" "+e.toFixed(2).replace(/./g,function(e,o,t){return o>0&&"."!==e&&(t.length-o)%3===0?","+e:e})},FormatKilobytes:function(e){return e/=1024,e.toFixed(2).replace(/./g,function(e,o,t){return o>0&&"."!==e&&(t.length-o)%3===0?","+e:e})},FormatMegabytes:function(e){return e/=1024,e/=1024,currency+" "+e.toFixed(2).replace(/./g,function(e,o,t){return o>0&&"."!==e&&(t.length-o)%3===0?","+e:e})},ProcessResponse:function(e){var o="";e.Title&&(o="<strong>".concat(e.Title,"</strong><br />")),e.Success?$.hood.Alerts.Success("".concat(o).concat(e.Message)):$.hood.Alerts.Error("".concat(o).concat(e.Errors))},GetQueryStringParamByName:function(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)","i"),t=o.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))},InsertQueryStringParam:function(e,o){e=escape(e),o=escape(o);var t=document.location.search.substr(1).split("&");if(""===t)document.location.search="?"+e+"="+o;else{for(var n,r=t.length;r--;)if(n=t[r].split("="),n[0]===e){n[1]=o,t[r]=n.join("=");break}r<0&&(t[t.length]=[e,o].join("=")),document.location.search=t.join("&")}},InsertQueryStringParamToUrl:function(e,o,t){o=escape(o),t=escape(t);var n=e.search.substr(1).split("&");if(""===n)e.search="?"+o+"="+t;else{for(var r,a=n.length;a--;)if(r=n[a].split("="),r[0]===o){r[1]=t,n[a]=r.join("=");break}a<0&&(n[n.length]=[o,t].join("=")),e.search=n.join("&")}return e},UrlToLocationObject:function(e){var o=document.createElement("a");return o.href=e,o},FindAndRemoveFromArray:function(e,o,t){$.each(e,function(n,r){r[o]===t&&e.splice(n,1)})},FindAndReturnFromArray:function(e,o,t){var n=null;return $.each(e,function(e,r){r[o]===t&&(n=r)}),n},LeftPad:function(e,o){for(var t=e+"";t.length<o;)t="0"+t;return t},DateAdd:function(e,o,t){var n=new Date(e);switch(o.toLowerCase()){case"year":n.setFullYear(n.getFullYear()+t);break;case"quarter":n.setMonth(n.getMonth()+3*t);break;case"month":n.setMonth(n.getMonth()+t);break;case"week":n.setDate(n.getDate()+7*t);break;case"day":n.setDate(n.getDate()+t);break;case"hour":n.setTime(n.getTime()+36e5*t);break;case"minute":n.setTime(n.getTime()+6e4*t);break;case"second":n.setTime(n.getTime()+1e3*t);break;default:n=void 0}return n},GenerateRandomString:function(e){var o="!@#$&*",t="abcdefghijklmnopqrstuvwxyz",n="ABCDEFGHIJKLMNOPQRSTUVWXYZ",r="0123456789",a=t+n+r,s=(o.pick(1)+t.pick(1)+n.pick(1)+a.pick(5,10)).shuffle();return s}},$.hood||($.hood={}),$.hood.Handlers={Init:function(){$("body").on("click",".select-text",$.hood.Handlers.SelectTextContent),$("body").on("click",".btn.click-select[data-target][data-value]",$.hood.Handlers.ClickSelect),$("body").on("click",".click-select.show-selected[data-target][data-value]",$.hood.Handlers.ClickSelect),$("body").on("click",".click-select:not(.show-selected)[data-target][data-value]",$.hood.Handlers.ClickSelectClean),$("body").on("click",".slide-link",$.hood.Handlers.SlideToAnchor),$("body").on("click",".scroll-target, .scroll-to-target",$.hood.Handlers.ScrollToTarget),$("body").on("click",".scroll-top, .scroll-to-top",$.hood.Handlers.ScrollToTop),$("body").on("change","input[type=checkbox][data-input]",$.hood.Handlers.CheckboxChange),$("body").on("change",".submit-on-change",$.hood.Handlers.SubmitOnChange),$("select[data-selected]").each($.hood.Handlers.SelectSetup),$("body").on("change",".inline-date",$.hood.Handlers.DateChange),$.hood.Handlers.Uploaders.Init(),$.hood.Handlers.ColorPickers()},ScrollToTop:function(e){return e&&e.preventDefault(),$("html, body").animate({scrollTop:0},800),!1},ScrollToTarget:function(e){e&&e.preventDefault();var o=$(this).attr("href").split("#")[0];if(o===window.location.pathname||""===o){var t=this.hash,n=$(t),r=$("header.header"),a=0;r&&(a=r.height()),$(this).data("offset")?$("html, body").stop().animate({scrollTop:n.offset().top-$(this).data("offset")},900,"swing"):$("html, body").stop().animate({scrollTop:n.offset().top-a},900,"swing")}},SubmitOnChange:function(e){e&&e.preventDefault(),$(this).parents("form").submit()},DateChange:function(e){e&&e.preventDefault();var o=$(this).parents(".hood-date").find(".date-output"),t=o.parents(".hood-date").find(".date-value").val(),n=/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;n.test(t)||(t="01/01/2001");var r=o.parents(".hood-date").find(".hour-value").val();$.isNumeric(r)||(r="00");var a=o.parents(".hood-date").find(".minute-value").val();$.isNumeric(a)||(a="00"),o.val(t+" "+r+":"+a+":00"),o.attr("value",t+" "+r+":"+a+":00")},CheckboxChange:function(e){e&&e.preventDefault();var o=new Array;$('input[data-input="'+$(this).data("input")+'"]').each(function(){$(this).is(":checked")&&o.push($(this).val())});var t="#"+$(this).data("input"),n=JSON.stringify(o);$(t).val(n)},SelectSetup:function(){$(this).data("selected");if("undefined"!==$(this).data("selected")&&""!==$(this).data("selected")){var e=String($(this).data("selected"));$(this).val(e)}},ClickSelect:function(){var e=$(this),o="#"+e.data("target");$(o).val(e.data("value")),$(o).trigger("change"),$('.click-select[data-target="'+e.data("target")+'"]').each(function(){$(this).html($(this).data("temp")).removeClass("active")}),$('.click-select[data-target="'+e.data("target")+'"][data-value="'+e.data("value")+'"]').each(function(){$(this).data("temp",$(this).html()).html("Selected").addClass("active")})},ClickSelectClean:function(){var e=$(this),o="#"+e.data("target");$(o).val(e.data("value")),$(o).trigger("change"),$('.click-select.clean[data-target="'+e.data("target")+'"]').each(function(){$(this).removeClass("active")}),$('.click-select.clean[data-target="'+e.data("target")+'"][data-value="'+e.data("value")+'"]').each(function(){$(this).addClass("active")})},SelectTextContent:function(){var e=$(this);e.select(),e.mouseup(function(){return e.unbind("mouseup"),!1})},SlideToAnchor:function(){var e=$("body").scrollTop(),o=$($.attr(this,"href")).offset().top;return $("html, body").animate({scrollTop:o},Math.abs(o-e)),!1},Uploaders:{Init:function(){($(".image-uploader").length||$(".gallery-uploader").length)&&($(".upload-progress-bar").hide(),$.getScript("/lib/dropzone/min/dropzone.min.js",$.proxy(function(){$(".image-uploader").each(function(){$.hood.Handlers.Uploaders.SingleImage($(this).attr("id"),$(this).data("json"))}),$(".gallery-uploader").each(function(){$.hood.Handlers.Uploaders.Gallery($(this).attr("id"),$(this).data("json"))})},this)))},RefreshImage:function(e){$("."+e.Class).css({"background-image":"url("+e.Image+")"}),$("."+e.Class).find("img").attr("src",e.Image)},SingleImage:function(e,o){e="#"+e;$(e);Dropzone.autoDiscover=!1;var t=new Dropzone(e,{url:$(e).data("url"),maxFiles:1,paramName:"file",parallelUploads:1,autoProcessQueue:!0,previewsContainer:!1,clickable:e});t.on("addedfile",function(){}),t.on("totaluploadprogress",function(o){$(".upload-progress-bar."+e.replace("#","")+" .progress-bar").css({width:o+"%"})}),t.on("sending",function(o){$(".upload-progress-bar."+e.replace("#","")).show(),$($(e).data("preview")).addClass("loading")}),t.on("queuecomplete",function(o){$(".upload-progress-bar."+e.replace("#","")).hide()}),t.on("success",function(n,r){r.Success?(r.Media&&($(o).val(JSON.stringify(r.Media)),$($(e).data("preview")).css({"background-image":"url("+r.Media.SmallUrl+")"}),$($(e).data("preview")).find("img").attr("src",r.Media.SmallUrl)),$.hood.Alerts.Success("New image added!")):$.hood.Alerts.Error("There was a problem adding the image: "+r.Error),t.removeFile(n),$($(e).data("preview")).removeClass("loading")})},Gallery:function(e){Dropzone.autoDiscover=!1;var o=document.querySelector(e+"-template");o.id="";var t=o.parentNode.innerHTML;o.parentNode.removeChild(o);var n=new Dropzone(e,{url:$(e).data("url"),thumbnailWidth:80,thumbnailHeight:80,parallelUploads:5,previewTemplate:t,paramName:"files",autoProcessQueue:!0,previewsContainer:"#previews",clickable:".fileinput-button",dictDefaultMessage:'<span><i class="fa fa-cloud-upload fa-4x"></i><br />Drag and drop files here, or simply click me!</div>',dictResponseError:"Error while uploading file!"});$(e+" .cancel").hide(),n.on("addedfile",function(o){$(o.previewElement.querySelector(".complete")).hide(),$(o.previewElement.querySelector(".cancel")).show(),$(e+" .cancel").show()}),n.on("totaluploadprogress",function(e){document.querySelector("#total-progress .progress-bar").style.width=e+"%"}),n.on("sending",function(e){document.querySelector("#total-progress").style.opacity="1"}),n.on("complete",function(e){$(e.previewElement.querySelector(".cancel")).hide(),$(e.previewElement.querySelector(".progress")).hide(),$(e.previewElement.querySelector(".complete")).show(),$.hood.Inline.Refresh(".gallery")}),n.on("queuecomplete",function(o){document.querySelector("#total-progress").style.opacity="0",$(e+" .cancel").hide()}),n.on("success",function(e,o){$.hood.Inline.Refresh(".gallery"),o.Success?$.hood.Alerts.Success("New images added!"):$.hood.Alerts.Error("There was a problem adding the profile image: "+o.Error)}),document.querySelector(".actions .cancel").onclick=function(){n.removeAllFiles(!0)}}},ColorPickers:function(){var e=function(e,o){var t=$(o._root.button).parent().data("target");$(o._root.button).css({"background-color":e.toHEXA().toString()});var n=o.getColor().toHEXA(),r="";for(i=n.length-1;i>=0;i--)r=n[i]+r;$(t).val("#"+r)},o=[];$(".color-picker").each(function(t,n){var r=Pickr.create({el:n.children[0],appClass:"custom-class",theme:"monolith",useAsButton:!0,defaultRepresentation:"HEXA",position:"bottom-end",components:{opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsva:!1,input:!0,clear:!0}}}).on("init",function(o){var t=$(o._root.button).parent().data("target"),n=$(t).val();$(t).on("click",$.proxy(function(){this.show()},o)),o.setColor(n),e(o.getColor(),o)}).on("clear",function(o){var t=$(o._root.button).parent().data("target");o.setColor("transparent"),e(o.getColor(),o),$(t).val("")}).on("change",e);o.push(r)})}},$(document).ready($.hood.Handlers.Init),String.prototype.contains=function(e){return this.indexOf(e)!==-1},String.prototype.pick=function(e,o){var t,n="";t="undefined"==typeof o?e:e+Math.floor(Math.random()*(o-e));for(var r=0;r<t;r++)n+=this.charAt(Math.floor(Math.random()*this.length));return n},String.prototype.shuffle=function(){var e,o,t=this.split(""),n=t.length;if(n)for(;--n;)o=Math.floor(Math.random()*(n+1)),e=t[o],t[o]=t[n],t[n]=e;return t.join("")},String.prototype.toSeoUrl=function(){var e=this.replace(/[^a-zA-Z0-9]/g," ").replace(/\s+/g,"-").toLowerCase();"-"===e.charAt(0)&&(e=e.substring(1));var o=e.length-1;return"-"===e.charAt(o)&&(e=e.substring(0,o)),e},$.hood||($.hood={}),$.hood.FormValidator=function(e,o){this.Options=$.extend({formTag:e,validationRules:null,validationMessages:{},placeBelow:!0,submitButtonTag:null,submitUrl:null,submitFunction:null,serializationFunction:function(){var e=$(this.formTag).serialize();return e}},o||{}),this.LoadValidation=function(){$.hood.Helpers.IsNullOrUndefined(this.Options.formTag)||($(this.Options.formTag).find("input, textarea, select").keypress($.proxy(function(e){if(13===e.which)return $.proxy(this.submitForm(),this),e.preventDefault(),!1},this)),$(this.Options.formTag).validate({submitHandler:function(e){e.preventDefault()},errorClass:this.Options.errorClass,focusInvalid:!1,rules:this.Options.validationRules,messages:this.Options.validationMessages}),$.hood.Helpers.IsNullOrUndefined(this.Options.submitButtonTag)||$(this.Options.submitButtonTag).click($.proxy(this.submitForm,this)))},this.submitForm=function(){$(this.Options.formTag).valid()&&(this.TempButtonContent=$(this.Options.submitButtonTag).removeClass("btn-primary").addClass("btn-default").html(),$(this.Options.submitButtonTag).removeClass("btn-primary").addClass("btn-default").html('<i class="fa fa-refresh fa-spin"></i>&nbsp;Loading...'),$(this.Options.formTag).find("input[type=checkbox]").each(function(){$(this).is(":checked")&&$(this).val("true")}),$.post(this.Options.submitUrl,this.Options.serializationFunction(),$.proxy(function(e){$(this.Options.submitButtonTag).removeClass("btn-default").addClass("btn-primary").html(this.TempButtonContent),this.Options.submitFunction(e)},this)))},this.LoadValidation(),this.Options.placeBelow&&$(this.Options.formTag).addClass("validation-below")},$.fn.hoodValidator=function(e){return this.each(function(){var o=$(this);if(!o.data("hoodValidator")){var t=new $.hood.FormValidator(this,e);o.data("hoodValidator",t)}})},$.hood||($.hood={}),$.hood.Addresses={Init:function(){$("body").on("click",".address-set-billing",$.hood.Addresses.SetBilling),$("body").on("click",".address-set-delivery",$.hood.Addresses.SetDelivery),$("body").on("click",".address-delete",$.hood.Addresses.Delete)},Lists:{Address:{Loaded:function(e){$.hood.Loader(!1)},Reload:function(e){$("#address-list").doesExist()&&$.hood.Inline.Reload($("#address-list"),e)}}},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Addresses.Lists.Address.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Address deleted, redirecting...</strong><br />Just taking you back to the address list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The address will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')},CreateOrEdit:function(){$.hood.Google.Addresses.InitAutocomplete(),$("#address-form").hoodValidator({validationRules:{Number:{required:!0},Address1:{required:!0},City:{required:!0},County:{required:!0},Postcode:{required:!0},Country:{required:!0}},submitButtonTag:$("#address-form-submit"),submitUrl:$("#address-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Addresses.Lists.Address.Reload(),e.Success&&$.hood.Inline.CloseModal()}})},SetBilling:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Addresses.Lists.Address.Reload()})};$.hood.Alerts.Confirm("The current billing address will be overwritten.","Are you sure?",t,"error")},SetDelivery:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Addresses.Lists.Address.Reload()})};$.hood.Alerts.Confirm("The current delivery address will be overwritten.","Are you sure?",t,"error")}},$(document).ready($.hood.Addresses.Init);var swalWithBootstrapButtons=Swal.mixin({customClass:{confirmButton:"btn btn-success btn-lg m-1 pl-4 pr-4",cancelButton:"btn btn-danger btn-lg m-1"},buttonsStyling:!1}),Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!0});$.hood||($.hood={}),$.hood.Alerts={Error:function(e,o,t,n,r,a,s){t===!0?this.SweetAlert(e,o,"error",n,r,a,s):this.Alert(e,o,"error")},Warning:function(e,o,t,n,r,a,s){t===!0?this.SweetAlert(e,o,"warning",n,r,a,s):this.Alert(e,o,"warning")},Message:function(e,o,t,n,r,a,s){t===!0?this.SweetAlert(e,o,"info",n,r,a,s):this.Alert(e,o,"info")},Success:function(e,o,t,n,r,a,s){t===!0?this.SweetAlert(e,o,"success",n,r,a,s):this.Alert(e,o,"success")},Alert:function(e,o,t){Toast.fire({type:t||"info",html:e,title:o})},SweetAlert:function(e,o,t,n,r,a,s){swalWithBootstrapButtons.fire({title:o,html:e,type:t||"info",footer:n,showConfirmButton:r,timer:a}).then(function(e){e.dismiss||s(e)})},Confirm:function(e,o,t,n,r,a,s){swalWithBootstrapButtons.fire({title:o||"Woah!",html:e||"Are you sure you want to do this?",type:n||"warning",footer:r||'<span class="text-warning"><i class="fa fa-exclamation-triangle"></i> This cannot be undone.</span>',showCancelButton:!0,confirmButtonText:a||"Ok",cancelButtonText:s||"Cancel"}).then(function(e){e.dismiss||t(e.value)})},Prompt:function(e,o,t,n,r,a,s,i,l){swalWithBootstrapButtons.fire({input:n||"text",inputAttributes:l||{autocapitalize:"off"},title:o||"Enter a value",html:e||"Fill in the field and press Ok to continue.",type:r||"info",footer:a,showCancelButton:!0,confirmButtonText:s||"Ok",cancelButtonText:i||"Cancel"}).then(function(e){e.dismiss||t(e.value)})}},$.hood||($.hood={}),$.hood.Forms={Init:function(){$(".floating-label > label").each(function(){var e=$(this);e.parent().append(e)})},GetAllowedExtensions:function(e){switch(e){case"Image":return["png","jpg","jpeg","bmp","gif"];case"Document":return["doc","docx","pdf","rtf"];case"All":return""}},GetAllowedFiles:function(e){switch(e){case"Image":return"image/png,jpg,image/jpeg,image/gif";case"Document":return"application/msword,application/pdf,text/rtf";case"All":return""}}},$(document).ready($.hood.Forms.Init),$.hood||($.hood={}),$.hood.Inline={Tags:{},Init:function(){$(".hood-inline:not(.refresh)").each($.hood.Inline.Load),$("body").on("click",".hood-inline-task",$.hood.Inline.Task),$("body").on("click",".hood-modal",function(e){e.preventDefault(),$.hood.Inline.Modal($(this).attr("href"),$(this).data("complete"))}),$.hood.Inline.DataList.Init()},Refresh:function(e){$(e||".hood-inline").each($.hood.Inline.Load)},Load:function(){$.hood.Inline.Reload(this)},Reload:function(e,o){var t=$(e);t.addClass("loading"),o||(o=t.data("complete"));var n=t.data("url");$.get(n,$.proxy(function(e){t.html(e),t.removeClass("loading"),o&&$.hood.Inline.RunComplete(o,t,e)},t)).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},CurrentModal:null,Modal:function(e,o){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&$.hood.Inline.CurrentModal&&$.hood.Inline.CurrentModal.modal("hide"),$.get(e,function(e){var t="#"+$(e).attr("id");$(e).addClass("hood-inline-modal"),$(t).length&&$(t).remove(),$("body").append(e),$.hood.Inline.CurrentModal=$(t),$(t).modal(),$(t).on("shown.bs.modal",function(){$(document).off("focusin.modal")}),$(t).on("hidden.bs.modal",function(e){$(this).remove()}),o&&$.hood.Inline.RunComplete(o,$(t),e)}).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},CloseModal:function(){$.hood.Inline.CurrentModal&&$.hood.Inline.CurrentModal.modal("hide")},Task:function(e){e.preventDefault();var o=$(e.currentTarget);o.addClass("loading"),complete=o.data("complete"),$.get(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),e.Success&&o&&o.data("redirect")&&setTimeout(function(){window.location=o.data("redirect")},1500),o.removeClass("loading"),complete&&$.hood.Inline.RunComplete(complete,o,e)}).fail($.hood.Inline.HandleError).complete($.hood.Inline.Finish)},DataList:{Init:function(){$(".hood-inline-list.query").each(function(){$(this).data("url",$(this).data("url")+window.location.search)}),$(".hood-inline-list:not(.refresh)").each($.hood.Inline.Load),$("body").on("click",".hood-inline-list .pagination a",function(e){e.preventDefault(),$.hood.Loader(!0);var o=document.createElement("a");o.href=$(this).attr("href");var t=$(this).parents(".hood-inline-list"),n=document.createElement("a");n.href=t.data("url"),n.search=o.search,$.hood.Inline.DataList.Reload(t,n)}),$("body").on("submit",".hood-inline-list form",function(e){e.preventDefault(),$.hood.Loader(!0);var o=$(this),t=o.parents(".hood-inline-list"),n=document.createElement("a");n.href=t.data("url"),n.search="?"+o.serialize(),$.hood.Inline.DataList.Reload(t,n)}),$("body").on("submit","form.inline",function(e){e.preventDefault(),$.hood.Loader(!0);var o=$(this),t=$(o.data("target")),n=document.createElement("a");n.href=t.data("url"),n.search="?"+o.serialize(),$.hood.Inline.DataList.Reload(t,n)}),$("body").on("change","form.inline .refresh-on-change, .hood-inline-list form",function(e){e.preventDefault(),$.hood.Loader(!0);var o=$(this).parents("form"),t=$(o.data("target")),n=document.createElement("a");n.href=t.data("url"),n.search="?"+o.serialize(),$.hood.Inline.DataList.Reload(t,n)})},Reload:function(e,o){if(history.pushState&&e.hasClass("query")){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+o.href.substring(o.href.indexOf("?")+1);window.history.pushState({path:t},"",t)}e.data("url",$.hood.Helpers.InsertQueryStringParamToUrl(o,"inline","true")),$.hood.Inline.Reload(e)}},HandleError:function(e){500===e.status?$.hood.Alerts.Error("<strong>Error "+e.status+"</strong><br />There was an error processing the content, please contact an administrator if this continues.<br/>"):404===e.status?$.hood.Alerts.Error("<strong>Error "+e.status+"</strong><br />The content could not be found.<br/>"):401===e.status&&($.hood.Alerts.Error("<strong>Error "+e.status+"</strong><br />You are not allowed to view this resource, are you logged in correctly?<br/>"),window.location=window.location)},Finish:function(){$.hood.Loader(!1)},RunComplete:function RunComplete(complete,sender,data){if(!$.hood.Helpers.IsNullOrUndefined(complete)){var func=eval(complete);"function"==typeof func&&func(sender,data)}}},$(document).ready($.hood.Inline.Init),$.hood.Modals={Open:$.hood.Inline.Modal},$.hood||($.hood={}),$.hood.Media={Init:function(){$("body").on("click",".media-delete",$.hood.Media.Delete),$("body").on("click",".media-directories-delete",$.hood.Media.Directories.Delete),$.hood.Media.Upload.Init(),$.hood.Media.Actions.Init()},Loaded:function(e){$.hood.Loader(!1)},BladeLoaded:function(e){$.hood.Media.LoadMediaPlayers()},Reload:function(e){$.hood.Inline.Reload($("#media-list"),e)},ReloadDirectories:function(e){$.hood.Inline.Reload($("#media-directories-list"),e)},Actions:{Init:function(){$("body").on("click",".hood-image-attach",$.hood.Media.Actions.Load.Attach),$("body").on("click",".hood-image-clear",$.hood.Media.Actions.Complete.Clear),$("body").on("click",".hood-image-insert",$.hood.Media.Actions.Load.Insert),$("body").on("click",".hood-media-select",$.hood.Media.Actions.Load.Select)},Target:null,Json:null,Current:{Attach:null},Load:{Attach:function(e){e.preventDefault(),$.hood.Media.Actions.Target=$($(this).data("tag")),$.hood.Media.Actions.Json=$($(this).data("json")),$.hood.Inline.Modal($(this).data("url"),function(){$.hood.Media.Reload(function(){$("body").off("click",".media-attach"),$("body").on("click",".media-attach",$.hood.Media.Actions.Complete.Attach)}),$.hood.Media.Upload.Init()})},Insert:function(e){var o=$("#"+e.id);o.data("imagesUrl")&&e.addButton("hoodimage",{text:"Insert image...",icon:!1,onclick:$.proxy(function(o){$.hood.Inline.Modal($(this).data("imagesUrl"),function(){$.hood.Media.Reload(function(){$("body").off("click"),$("body").on("click",".media-insert",$.proxy($.hood.Media.Actions.Complete.Insert,e))}),$.hood.Media.Upload.Init()})},o)})},Select:function(e){$.hood.Media.Actions.Target=$($(this).data("target")),$.hood.Inline.Modal($(this).data("url"),function(){$.hood.Media.Reload(function(){$("body").off("click",".media-select"),$("body").on("click",".media-select",$.hood.Media.Actions.Complete.Select)}),$.hood.Media.Upload.Init()})}},Complete:{Attach:function(e){e.preventDefault();var o=$.hood.Media.Actions.Target,t=$.hood.Media.Actions.Json;$.post($(this).data("url"),function(e){if($.hood.Helpers.ProcessResponse(e),e.Success){var n=e.Media.Icon;"Image"===e.Media.GeneralFileType&&(n=e.Media.MediumUrl),$.hood.Helpers.IsNullOrUndefined(o)||(o.css({"background-image":"url("+n+")"}),o.find("img").attr("src",n),o.removeClass("loading")),$.hood.Helpers.IsNullOrUndefined(t)||t.val(e.MediaJson)}}).done(function(){$("#media-select-modal").modal("hide")}).fail($.hood.Inline.HandleError)},Insert:function(e){var o=$(e.target),t=this;t.insertContent('<img alt="'+o.data("title")+'" src="'+o.data("url")+'"/>'),$.hood.Inline.CloseModal()},Select:function(e){var o=$(this).data("url"),t=$.hood.Media.Actions.Target;$(t).each(function(){$(this).is("input")?$(this).val(o):($(this).attr("src",o),$(this).css({"background-image":"url("+o+")"}),$(this).find("img").attr("src",o))}),$.hood.Alerts.Success("Image URL has been inserted.<br /><strong>Remember to press save!</strong>"),$("#media-select-modal").modal("hide")},Clear:function(e){e.preventDefault();var o=$($(this).data("tag")),t=$($(this).data("json"));$.post($(this).data("url"),function(e){$.hood.Helpers.ProcessResponse(e),e.Success&&(icon=e.Media.Icon,"Image"===e.Media.GeneralFileType&&(icon=e.Media.MediumUrl),$.hood.Helpers.IsNullOrUndefined(o)||(o.css({"background-image":"url("+icon+")"
}),o.find("img").attr("src",icon),o.removeClass("loading")),$.hood.Helpers.IsNullOrUndefined(t)||t.val(e.Json))}).fail($.hood.Inline.HandleError)}},RefreshImage:function(e,o,t){var n=$(e);n.addClass("loading"),$.get(o,{id:t},$.proxy(function(e){n.css({"background-image":"url("+e.SmallUrl+")"}),n.find("img").attr("src",e.SmallUrl),n.removeClass("loading")},this))}},Upload:{Init:function(){if($("#media-add").doesExist()){$("#media-total-progress").hide(),Dropzone.autoDiscover=!1;var e=new Dropzone("#media-upload",{url:$.hood.Media.Upload.UploadUrl,thumbnailWidth:80,thumbnailHeight:80,parallelUploads:5,previewTemplate:!1,paramName:"files",autoProcessQueue:!0,previewsContainer:!1,clickable:"#media-add",dictDefaultMessage:'<span><i class="fa fa-cloud-upload fa-4x"></i><br />Drag and drop files here, or simply click me!</div>',dictResponseError:"Error while uploading file!"});e.on("success",function(e,o){$.hood.Helpers.ProcessResponse(o)}),e.on("addedfile",function(e){$("#media-total-progress .progress-bar").css({width:"0%"}),$("#media-total-progress .progress-bar .percentage").html("0%")}),e.on("totaluploadprogress",function(e){$("#media-total-progress .progress-bar").css({width:e+"%"}),$("#media-total-progress .progress-bar .percentage").html(e+"%")}),e.on("sending",function(e){$("#media-total-progress").fadeIn(),$("#media-total-progress .progress-bar").css({width:"0%"}),$("#media-total-progress .progress-bar .percentage").html("0%")}),e.on("complete",function(e){$.hood.Media.Reload()}),e.on("queuecomplete",function(e){$("#media-total-progress").hide(),$.hood.Media.Reload()})}},UploadUrl:function(){return $("#media-upload").data("url")+"?directoryId="+$("input[type='radio'][name='dir']:checked").val()}},Delete:function(e){var o=$(this),t=function(e){e&&$.post("/admin/media/delete",{id:o.data("id")},function(e){$.hood.Helpers.ProcessResponse(e),e.Success&&($.hood.Media.Reload(),$(".modal-backdrop").remove(),$(".modal").modal("hide"))})};$.hood.Alerts.Confirm("The media file will be permanently removed. This cannot be undone.","Are you sure?",t,"warning",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> Ensure this file is not attached to any posts, pages or features of the site, or it will appear as a broken image or file.</span>',"Ok","Cancel")},RestrictDir:function(){var e=/[^0-9A-Za-z- ]*/g,o=$(this).val(),t=o.replace(e,"");o!==t&&$(this).val(t)},Directories:{Editor:function(){$("#content-directories-edit-form").hoodValidator({validationRules:{DisplayName:{required:!0},Slug:{required:!0}},submitButtonTag:$("#content-directories-edit-submit"),submitUrl:$("#content-directories-edit-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Media.ReloadDirectories(),$.hood.Media.Reload()}})},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Media.ReloadDirectories(),$.hood.Media.Reload()})};$.hood.Alerts.Confirm("The directory and all files will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle mr-2"></i><strong>This cannot be undone!</strong><br />Ensure these files are not attached to any posts, pages or features of the site, or it will appear as a broken image or file.</span>')}},Players:{},LoadMediaPlayers:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".hood-media",o={techOrder:["azureHtml5JS","flashSS","html5FairPlayHLS","silverlightSS","html5"],nativeControlsForTouch:!1,controls:!0,autoplay:!1,seeking:!0};$(e).each(function(){try{if(player=$.hood.Media.Players[$(this).data("id")],player)try{player.dispose()}catch(e){console.log("There was a problem disposing the old media player: ".concat(e))}$.hood.Media.Players[$(this).data("id")]=amp($(this).attr("id"),o),player=$.hood.Media.Players[$(this).data("id")],player.src([{src:$(this).data("file"),type:$(this).data("type")}])}catch(e){console.log("There was a problem playing the media file: ".concat(e))}})}},$(document).ready($.hood.Media.Init),$.hood||($.hood={}),$.hood.Content={Init:function(){$("body").on("click",".content-delete",$.hood.Content.Delete),$("body").on("click",".content-meta-delete",$.hood.Content.Meta.Delete),$("body").on("click",".content-clone",$.hood.Content.Clone),$("body").on("click",".content-set-status",$.hood.Content.SetStatus),$("body").on("click",".content-media-delete",$.hood.Content.Media.Delete),$("body").on("click",".content-categories-delete",$.hood.Content.Categories.Delete),$("body").on("change",".content-categories-check",$.hood.Content.Categories.ToggleCategory),$("body").on("click",".add-custom-field",$.hood.Content.Types.AddField),$("body").on("click",".delete-custom-field",$.hood.Content.Types.DeleteField),$("body").on("keyup","#Slug",function(){$(".slug-display").html($(this).val())}),$("#content-edit-form").doesExist()&&$.hood.Content.Edit.Init(),$("#content-meta-form").doesExist()&&$.hood.Content.Meta.Init()},Lists:{Content:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#content-list").doesExist()&&$.hood.Inline.Reload($("#content-list"),e)}},Categories:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#content-categories-list").doesExist()&&$.hood.Inline.Reload($("#content-categories-list"),e)}},Fields:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#content-meta-list").doesExist()&&$.hood.Inline.Reload($("#content-meta-list"),e)}},Media:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#content-media-list").doesExist()&&$.hood.Inline.Reload($("#content-media-list"),e)}}},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Content.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Content deleted, redirecting...</strong><br />Just taking you back to the content list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The content will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')},SetStatus:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),o.data("status"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Content.Reload()})};$.hood.Alerts.Confirm("The item will be immediately visible on the website.","Are you sure?",t,"warning")},Clone:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),o.data("status"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Content.Reload()})};$.hood.Alerts.Confirm("This will duplicate the content and everything inside it.","Are you sure?",t,"warning")},Create:function(){$("#content-create-form").find(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$("#content-create-form").hoodValidator({validationRules:{Title:{required:!0},Except:{required:!0},PublishDate:{required:!0,ukdate:!0}},submitButtonTag:$("#content-create-submit"),submitUrl:$("#content-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Content.Reload()}})},Edit:{Init:function(){$(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$(".timepicker").datetimepicker({locale:"en-gb",format:"LT"}),$(".datetimepicker").datetimepicker({locale:"en-gb",sideBySide:!0}),$.hood.Content.Edit.InitImageUploader()},InitImageUploader:function(){if($("#content-gallery-add").doesExist()){$("#content-gallery-total-progress").hide(),Dropzone.autoDiscover=!1;var e=new Dropzone("#content-gallery-upload",{url:$("#content-gallery-upload").data("url"),thumbnailWidth:80,thumbnailHeight:80,parallelUploads:5,previewTemplate:!1,paramName:"files",autoProcessQueue:!0,previewsContainer:!1,clickable:"#content-gallery-add",dictDefaultMessage:'<span><i class="fa fa-cloud-upload fa-4x"></i><br />Drag and drop files here, or simply click me!</div>',dictResponseError:"Error while uploading file!"});e.on("success",function(e,o){$.hood.Helpers.ProcessResponse(o),$.hood.Content.Lists.Media.Reload()}),e.on("addedfile",function(e){$("#content-gallery-total-progress .progress-bar").css({width:"0%"}),$("#content-gallery-total-progress .progress-bar .percentage").html("0%")}),e.on("totaluploadprogress",function(e){$("#content-gallery-total-progress .progress-bar").css({width:e+"%"}),$("#content-gallery-total-progress .progress-bar .percentage").html(e+"%")}),e.on("sending",function(e){$("#content-gallery-total-progress").fadeIn(),$("#content-gallery-total-progress .progress-bar").css({width:"0%"}),$("#content-gallery-total-progress .progress-bar .percentage").html("0%")}),e.on("complete",function(e){$.hood.Content.Lists.Media.Reload()}),e.on("queuecomplete",function(e){$("#content-gallery-total-progress").hide(),$.hood.Content.Lists.Media.Reload()})}}},Categories:{Editor:function(){$("#content-categories-edit-form").hoodValidator({validationRules:{DisplayName:{required:!0},Slug:{required:!0}},submitButtonTag:$("#content-categories-edit-submit"),submitUrl:$("#content-categories-edit-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Categories.Reload()}})},ToggleCategory:function(){$.post($(this).data("url"),{categoryId:$(this).val(),add:$(this).is(":checked")},function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Categories.Reload()})},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Categories.Reload()})};$.hood.Alerts.Confirm("The category will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')}},Meta:{Create:function(){$("#add-field-form").hoodValidator({validationRules:{cfName:{required:!0},cfType:{required:!0}},submitButtonTag:$("#add-field-submit"),submitUrl:"/admin/content/addmeta",submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Fields.Reload()}})},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Fields.Reload()})};$.hood.Alerts.Confirm("The field will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')}},Media:{Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Content.Lists.Media.Reload()})};$.hood.Alerts.Confirm("The image/media will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong><br /><span class="text-warning">If this is set as a featured image, this may cause issues, make sure to set another image as featured before deleting this one.</span></span>')}},Types:{AddField:function(){var e=$("#custom-field-name-"+$(this).data("id")).val(),o=$.hood.Content.Types.GetFieldsList($(this).data("id")),t=!1;if($.each(o,function(o,n){n.Name===e&&(t=!0)}),!e)return void $.hood.Alerts.Error("You have to name the field.");if(!o)return void $.hood.Alerts.Error("The field list is empty.");if(t)return void $.hood.Alerts.Error("Cannot insert two fields with the same key.");var n={Name:$("#custom-field-name-"+$(this).data("id")).data("prefix")+$("#custom-field-name-"+$(this).data("id")).val(),Default:$("#custom-field-default-"+$(this).data("id")).val(),Type:$("#custom-field-type-"+$(this).data("id")).val(),System:!1};o.push(n),$.hood.Content.Types.ReRenderFields(o,$(this).data("id")),$("#custom-fields-"+$(this).data("id")).val(JSON.stringify(o)),$.hood.Alerts.Success("Added field.")},DeleteField:function(){var e=$.hood.Content.Types.GetFieldsList($(this).data("id")),o=$(this).data("name");e=$.grep(e,function(e){return e.Name!==o}),$.hood.Content.Types.ReRenderFields(e,$(this).data("id")),$("#custom-fields-"+$(this).data("id")).val(JSON.stringify(e)),$.hood.Alerts.Success("Deleted field.")},GetFieldsList:function(e){var o=$("#custom-fields-"+e).val();if(null!==o&&""!==o){var t=JSON.parse(o);for(var n in t)if(t[n].hasOwnProperty("Name"))return t}return new Array},ReRenderFields:function(e,o){var t=$("#field-list-"+o).empty();for(i=0;i<e.length;i++){var n="<tr><td class='col-xs-8'><strong>"+e[i].Name+"</strong> "+e[i].Type+"</td><td class='col-xs-4 text-right'>";n+=e[i].System?'<span class="label label-default">System Field</span>':"<a class='delete-custom-field btn btn-xs bg-color-red txt-color-white' data-name='"+e[i].Name+"' data-id='"+o+"'><i class='fa fa-trash-o'></i></a>",n+="</td></tr>",t.append(n)}}}},$(document).ready($.hood.Content.Init),$.hood||($.hood={}),$.hood.Forums={Init:function(){$("body").on("click",".forum-delete",$.hood.Forums.Delete),$("body").on("click",".forum-archive",$.hood.Forums.Archive),$("body").on("click",".forum-publish",$.hood.Forums.Publish),$("body").on("click",".forum-categories-delete",$.hood.Forums.Categories.Delete),$("body").on("change",".forum-categories-check",$.hood.Forums.Categories.ToggleCategory),$("body").on("keyup","#Slug",function(){$(".slug-display").html($(this).val())}),$("#edit-forum").doesExist()&&$.hood.Forums.Edit.Init()},Lists:{Forums:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#forum-list").doesExist()&&$.hood.Inline.Reload($("#forum-list"),e)}},Categories:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#forum-categories-list").doesExist()&&$.hood.Inline.Reload($("#forum-categories-list"),e)}}},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Forums.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Forum deleted, redirecting...</strong><br />Just taking you back to the forum list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The forum will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')},Publish:function(e){var o=$(this);swal({title:"Are you sure?",text:"The item will be visible on the website.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, cancel!",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,closeOnCancel:!1},function(e){e?$.post("/admin/forums/publish/"+o.data("id"),null,function(e){e.Success?(swal({title:"Published!",text:"The item has now been published.",timer:1300,type:"success"}),setTimeout(function(){window.location=e.Url},500)):swal({title:"Error!",text:"There was a problem publishing the item: "+e.Errors,timer:5e3,type:"error"})}):swal("Cancelled","It's all good in the hood!","error")})},Archive:function(e){var o=$(this);swal({title:"Are you sure?",text:"The item will be hidden from the website.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, cancel!",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,closeOnCancel:!1},function(e){e?$.post("/admin/forums/archive/"+o.data("id"),null,function(e){e.Success?(swal({title:"Archived!",text:"The item has now been archived.",timer:1300,type:"success"}),setTimeout(function(){window.location=e.Url},500)):swal({title:"Error!",text:"There was a problem archiving the item: "+e.Errors,timer:5e3,type:"error"})}):swal("Cancelled","It's all good in the hood!","error")})},Create:function(){$("#forum-create-form").find(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$("#forum-create-form").hoodValidator({validationRules:{Title:{required:!0},Description:{required:!0}},submitButtonTag:$("#forum-create-submit"),submitUrl:$("#forum-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Forums.Reload()}})},Edit:{Init:function(){$(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$(".datetimepicker").datetimepicker({locale:"en-gb",format:"LT"})}},Categories:{Editor:function(){$("#forum-categories-edit-form").hoodValidator({validationRules:{DisplayName:{required:!0},Slug:{required:!0}},submitButtonTag:$("#forum-categories-edit-submit"),submitUrl:$("#forum-categories-edit-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Categories.Reload()}})},ToggleCategory:function(){$.post($(this).data("url"),{categoryId:$(this).val(),add:$(this).is(":checked")},function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Categories.Reload()})},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Categories.Reload()})};$.hood.Alerts.Confirm("The category will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')}}},$(document).ready($.hood.Forums.Init),$.hood||($.hood={}),$.hood.Logs={Init:function(){$("body").on("change",".logs-inline",$.hood.Logs.InlineToggle)},Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#logs-list").doesExist()&&$.hood.Inline.Reload($("#logs-list"),e)},ReloadInterval:null,InlineToggle:function(e){$(this).is(":checked")?$.hood.Logs.ReloadInterval=setInterval($.hood.Logs.Reload,5e3):$.hood.Logs.ReloadInterval=setInterval($.hood.Logs.Reload,5e3)}},$(document).ready($.hood.Logs.Init),$.hood||($.hood={}),$.hood.Property={Init:function(){$("body").on("click",".property-delete",$.hood.Property.Delete),$("body").on("click",".property-delete-all",$.hood.Property.DeleteAll),$("body").on("click",".property-delete-floor",$.hood.Property.DeleteFloorArea),$("body").on("click",".property-set-status",$.hood.Property.SetStatus),$("body").on("click",".property-media-delete",$.hood.Property.Media.Delete),$("#property-edit-form").doesExist()&&$.hood.Property.Edit.Init()},Lists:{Property:{Loaded:function(e,o){$.hood.Loader(!1),$.hood.Google.ClusteredMap()},Reload:function(e){$("#property-list").doesExist()&&$.hood.Inline.Reload($("#property-list"),e)}},Media:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#property-gallery-list").doesExist()&&$.hood.Inline.Reload($("#property-gallery-list"),e)}},Floorplans:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#property-floorplans-list").doesExist()&&$.hood.Inline.Reload($("#property-floorplans-list"),e)}},Floorareas:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#property-floors-list").doesExist()&&$.hood.Inline.Reload($("#property-floors-list"),e)}}},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Property.Lists.Property.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Property deleted, redirecting...</strong><br />Just taking you back to the property list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The property will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')},DeleteAll:function(e){e.preventDefault();var o=$(this);Swal.fire({title:"Are you sure?",html:"ALL of the properties will be permanently removed. Type 'DELETE' to continue.",input:"text",inputAttributes:{autocapitalize:"off"},footer:'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This can take a few minutes to complete and CANNOT be undone.</strong></span>',showCancelButton:!0,confirmButtonText:"Delete",showLoaderOnConfirm:!0,preConfirm:function(e){if("delete"!==e.toLowerCase())return Swal.showValidationMessage("You did not type DELETE."),!1;o.attr("href");$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Property.Lists.Property.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Properties deleted, redirecting...</strong><br />Just taking you back to the property list."),setTimeout(function(){window.location=o.data("redirect")},1500)),swal.close()}).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},allowOutsideClick:function(){return!Swal.isLoading()}})},SetStatus:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),o.data("status"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Property.Lists.Property.Reload()})};$.hood.Alerts.Confirm("The item will be immediately visible on the website.","Are you sure?",t,"warning")},Create:function(){$("#property-create-form").find(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$("#property-create-form").hoodValidator({validationRules:{Title:{required:!0},Address1:{required:!0},City:{required:!0},County:{required:!0},Country:{required:!0},Postcode:{required:!0},PublishDate:{required:!0,ukdate:!0}},submitButtonTag:$("#property-create-submit"),submitUrl:$("#property-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Property.Lists.Property.Reload()}}),$.hood.Google.Addresses.InitAutocomplete()},CreateFloorArea:function(){$("#property-floorArea-create-form").hoodValidator({validationRules:{Name:{required:!0},Number:{required:!0},SquareFeet:{required:!0},SquareMetres:{required:!0}},submitButtonTag:$("#property-floorArea-create-submit"),submitUrl:$("#property-floorArea-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Property.Lists.Floorareas.Reload()}}),$("body").on("change",".recalc-floor",$.hood.Property.RecalcFloor)},RecalcFloor:function(e){"SquareMetres"===this.id?$("#property-floorArea-create-form #SquareFeet").val(10.7639*Number($(this).val())):$("#property-floorArea-create-form #SquareMetres").val(Number($(this).val())/10.7639)},DeleteFloorArea:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Property.Lists.Floorareas.Reload()})};$.hood.Alerts.Confirm("The floor will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')},Edit:{Init:function(){$(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$.hood.Property.Upload.InitImageUploader(),$.hood.Property.Upload.InitFloorplanUploader()}},Upload:{InitImageUploader:function(){if($("#property-gallery-add").doesExist()){$("#property-gallery-total-progress").hide(),Dropzone.autoDiscover=!1;var e=new Dropzone("#property-gallery-upload",{url:$("#property-gallery-upload").data("url"),thumbnailWidth:80,thumbnailHeight:80,parallelUploads:5,previewTemplate:!1,paramName:"files",autoProcessQueue:!0,previewsContainer:!1,clickable:"#property-gallery-add",dictDefaultMessage:'<span><i class="fa fa-cloud-upload fa-4x"></i><br />Drag and drop files here, or simply click me!</div>',dictResponseError:"Error while uploading file!"});e.on("success",function(e,o){$.hood.Helpers.ProcessResponse(o),$.hood.Property.Lists.Media.Reload()}),e.on("addedfile",function(e){$("#property-gallery-total-progress .progress-bar").css({width:"0%"}),$("#property-gallery-total-progress .progress-bar .percentage").html("0%")}),e.on("totaluploadprogress",function(e){$("#property-gallery-total-progress .progress-bar").css({width:e+"%"}),$("#property-gallery-total-progress .progress-bar .percentage").html(e+"%")}),e.on("sending",function(e){$("#property-gallery-total-progress").fadeIn(),$("#property-gallery-total-progress .progress-bar").css({width:"0%"}),$("#property-gallery-total-progress .progress-bar .percentage").html("0%")}),e.on("complete",function(e){$.hood.Property.Lists.Media.Reload()}),e.on("queuecomplete",function(e){$("#property-gallery-total-progress").hide(),$.hood.Property.Lists.Media.Reload()})}},InitFloorplanUploader:function(){if($("#property-floorplans-add").doesExist()){$("#property-floorplans-total-progress").hide(),Dropzone.autoDiscover=!1;var e=new Dropzone("#property-floorplans-upload",{url:$("#property-floorplans-upload").data("url"),thumbnailWidth:80,thumbnailHeight:80,parallelUploads:5,previewTemplate:!1,paramName:"files",autoProcessQueue:!0,previewsContainer:!1,clickable:"#property-floorplans-add",dictDefaultMessage:'<span><i class="fa fa-cloud-upload fa-4x"></i><br />Drag and drop files here, or simply click me!</div>',dictResponseError:"Error while uploading file!"});e.on("success",function(e,o){$.hood.Helpers.ProcessResponse(o),$.hood.Property.Lists.Floorplans.Reload()}),e.on("addedfile",function(e){$("#property-floorplans-total-progress .progress-bar").css({width:"0%"}),$("#property-floorplans-total-progress .progress-bar .percentage").html("0%")}),e.on("totaluploadprogress",function(e){$("#property-floorplans-total-progress .progress-bar").css({width:e+"%"}),$("#property-floorplans-total-progress .progress-bar .percentage").html(e+"%")}),e.on("sending",function(e){$("#property-floorplans-total-progress").fadeIn(),$("#property-floorplans-total-progress .progress-bar").css({width:"0%"}),$("#property-floorplans-total-progress .progress-bar .percentage").html("0%")}),e.on("complete",function(e){$.hood.Property.Lists.Floorplans.Reload()}),e.on("queuecomplete",function(e){$("#property-floorplans-total-progress").hide(),$.hood.Property.Lists.Floorplans.Reload()})}}},Media:{Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Property.Lists.Media.Reload(),$.hood.Property.Lists.Floorplans.Reload()})};$.hood.Alerts.Confirm("The image/media will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong><br /><span class="text-warning">If this is set as a featured image, this may cause issues, make sure to set another image as featured before deleting this one.</span></span>')}}},$(document).ready($.hood.Property.Init),$.hood||($.hood={}),$.hood.Subscriptions={Init:function(){$("body").on("click",".subscriptions-subs-delete",$.hood.Subscriptions.Subscriptions.Delete),$("body").on("click",".subscriptions-plans-delete",$.hood.Subscriptions.Plans.Delete),$("#subscriptions-plans-edit-form").doesExist()&&$.hood.Subscriptions.Plans.Edit(),$("body").on("click",".subscriptions-products-delete",$.hood.Subscriptions.Products.Delete),$("#subscriptions-products-edit-form").doesExist()&&$.hood.Subscriptions.Products.Edit(),$("#subscriptions-stripe-edit-form").doesExist()&&$.hood.Subscriptions.Stripe.Edit()},Lists:{Plans:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#subscriptions-plans-list").doesExist()&&$.hood.Inline.Reload($("#subscriptions-plans-list"),e)}},Stripe:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#subscriptions-stripe-list").doesExist()&&$.hood.Inline.Reload($("#subscriptions-stripe-list"),e)}},StripeProducts:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#subscriptions-stripe-products-list").doesExist()&&$.hood.Inline.Reload($("#subscriptions-stripe-products-list"),e)}},Products:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#subscriptions-products-list").doesExist()&&$.hood.Inline.Reload($("#subscriptions-products-list"),e)}},Subscribers:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#subscriptions-subscribers-list").doesExist()&&$.hood.Inline.Reload($("#subscriptions-subscribers-list"),e)}}},Subscriptions:{Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Subscriptions.Lists.Subscribers.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Subscription deleted, redirecting...</strong><br />Just taking you back to the subscription list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The subscription will be removed from the site, however record of the subscription will remain in your Stripe account.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')}},Plans:{Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Subscriptions.Lists.Plans.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Plan deleted, redirecting...</strong><br />Just taking you back to the subscription plan list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The plan will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')},Create:function(){$("#subscriptions-plans-create-form").hoodValidator({validationRules:{Name:{required:!0},Description:{required:!0},CreatePrice:{required:!0},Currency:{required:!0},Interval:{required:!0},IntervalCount:{required:!0}},submitButtonTag:$("#subscriptions-plans-create-submit"),submitUrl:$("#subscriptions-plans-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Subscriptions.Lists.Plans.Reload()}})}},Products:{Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Subscriptions.Lists.Products.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Product deleted, redirecting...</strong><br />Just taking you back to the subscription product list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The product will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')},Create:function(){$("#susbcriptions-products-create-form").find(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$("#susbcriptions-products-create-form").hoodValidator({validationRules:{DisplayName:{required:!0}},submitButtonTag:$("#susbcriptions-products-create-submit"),submitUrl:$("#susbcriptions-products-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Subscriptions.Lists.Products.Reload()}})}}},$(document).ready($.hood.Subscriptions.Init),$.hood||($.hood={}),$.hood.Themes={Init:function(){$("body").on("click",".activate-theme",$.hood.Themes.Activate)},Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#themes-list").doesExist()&&$.hood.Inline.Reload($("#themes-list"),e)},Activate:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),setTimeout(function(){$.hood.Themes.Reload()},2e3)})};$.hood.Alerts.Confirm("The site will change themes, and the selected theme will be live right away.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process will take effect immediately!</strong></span>')}},$(document).ready($.hood.Themes.Init),$.hood||($.hood={}),$.hood.Users={Init:function(){$("body").on("click",".user-delete",$.hood.Users.Delete),$("body").on("click",".user-reset-password",$.hood.Users.Edit.ResetPassword),$("body").on("click",".user-notes-add",$.hood.Users.Edit.Notes.Add),
$("body").on("click",".user-notes-delete",$.hood.Users.Edit.Notes.Delete),$("body").on("change","#user-create-form #GeneratePassword",$.hood.Users.Create.GeneratePassword),$("body").on("change",".user-role-check",$.hood.Users.Edit.ToggleRole)},Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#user-list").doesExist()&&$.hood.Inline.Reload($("#user-list"),e)},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Users.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>User deleted, redirecting...</strong><br />Just taking you back to the user list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The user will be permanently removed, any site content will be reassigned to the ownership of the site owner, any user content (Forum Topics & Posts) will be deleted from the system and all associated media files.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong><br />This process will also cancel any active subscriptions.</span>')},Create:{Loaded:function(e){$("#user-create-form").hoodValidator({validationRules:{FirstName:{required:!0},LastName:{required:!0},UserName:{required:!0,email:!0},Password:{required:!0}},submitButtonTag:$("#user-create-submit"),submitUrl:$("#user-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Users.Reload()}})},GeneratePassword:function(){$(this).is(":checked")?($("#user-create-form #Password").val($.hood.Helpers.GenerateRandomString(0)),$("#user-create-form #Password").attr("type","text")):($("#user-create-form #Password").val(""),$("#user-create-form #Password").attr("type","password"))}},Edit:{ResetPassword:function(e){e.preventDefault();var o=$(this),t=function(e){return e!==!1&&(""===e?(swal.showInputError("You didn't supply a new password, we can't reset the password without it!"),!1):void $.post(o.attr("href"),{password:e},function(e){$.hood.Helpers.ProcessResponse(e)}))};$.hood.Alerts.Prompt("Please enter a new password for the user...","Reset password",t)},Notes:{Add:function(e){e.preventDefault();var o=$(this),t=function(e){return e===!1||""===e?(swal.showInputError("You enter anything!"),!1):void $.post(o.attr("href"),{note:e},function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Inline.Reload("#user-notes")})};$.hood.Alerts.Prompt("Enter and store a note about this user. These are internal, and are not shown to the user.","Add a note",t,"textarea")},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e?$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Inline.Reload("#user-notes")}):swal("Cancelled","It's all good in the hood!","error")};$.hood.Alerts.Confirm("Are you sure?","The note will be removed permanently.",t)}},ToggleRole:function(){$(this).is(":checked")?$.post($(this).data("url"),{role:$(this).val(),add:!0},function(e){$.hood.Helpers.ProcessResponse(e)}):$.post($(this).data("url"),{role:$(this).val(),add:!1},function(e){$.hood.Helpers.ProcessResponse(e)})}}},$(document).ready($.hood.Users.Init),$.hood||($.hood={}),$.hood.Google={Maps:function(){$(".google-map").each(function(){var e=new google.maps.LatLng($(this).data("lat"),$(this).data("long"));console.log("Loading map at: "+$(this).data("lat")+", "+$(this).data("long"));var o=new google.maps.Map(this,{zoom:$(this).data("zoom")||15,center:e,scrollwheel:!1});new google.maps.Marker({position:e,map:o,title:$(this).data("marker")});$(window).resize(function(){google.maps.event.trigger(o,"resize")}),google.maps.event.trigger(o,"resize")})},Addresses:{AddressForm:{QuickName:"{route}, {postal_town}, {postal_code}",Number:"{street_number}",Address1:"{route}",Address2:"{locality}",City:"{postal_town}",County:"{administrative_area_level_2}",Country:"{country}",Postcode:"{postal_code}"},placeSearch:null,place:null,autocomplete:null,InitAutocomplete:function(){this.autocomplete=new google.maps.places.Autocomplete(document.getElementById("address-autocomplete"),{types:["geocode"]}),this.autocomplete.addListener("place_changed",$.hood.Google.Addresses.FillInAddress)},FillInAddress:function(){$.hood.Google.Addresses.place=$.hood.Google.Addresses.autocomplete.getPlace();for(var e in $.hood.Google.Addresses.AddressForm)if($("#"+e).doesExist()){$("#"+e).val("");var o=$.hood.Google.Addresses.AddressForm[e],t=$.hood.Google.GetPlaceholders(o);for(var n in t)o=o.replace("{"+t[n]+"}",$.hood.Google.Addresses.GetValueFromAddressComponents(t[n]));o.contains("undefined")||$("#"+e).val(o)}$("#Latitude").val($.hood.Google.Addresses.place.geometry.location.lat),$("#Longitude").val($.hood.Google.Addresses.place.geometry.location.lng)},GetValueFromAddressComponents:function(e){for(var o=0;o<$.hood.Google.Addresses.place.address_components.length;o++){var t=$.hood.Google.Addresses.place.address_components[o].types[0];if(t===e)return $.hood.Google.Addresses.place.address_components[o].long_name}},GeoLocate:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude},t=new google.maps.Circle({center:o,radius:e.coords.accuracy});$.hood.Google.Addresses.autocomplete.setBounds(t.getBounds())})}},ClusteredMap:function ClusteredMap(){var mapElement=$("#clustered-map");if(mapElement.length){var scrollWheel=!1;mapElement.attr("data-scrollwheel")&&(scrollWheel=mapElement.data("scrollwheel"));var zoom=!1;mapElement.attr("data-zoom")&&(zoom=mapElement.data("zoom"));var map=new google.maps.Map(document.getElementById("clustered-map"),{zoom:zoom,maxZoom:18,scrollwheel:scrollWheel,center:{lat:mapElement.data("lat"),lng:mapElement.data("long")}}),oms=new OverlappingMarkerSpiderfier(map,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0,circleFootSeparation:80,spiralFootSeparation:80}),iconSize=new google.maps.Size(30,41),labels="ABCDEFGHIJKLMNOPQRSTUVWXYZ",locations=mapElement.data("locations"),clickFunction=mapElement.data("click"),markers=locations.map(function(location,i){var marker=new google.maps.Marker({position:new google.maps.LatLng(location.Latitude,location.Longitude),optimized:!isIE});marker.setIcon({url:mapElement.data("marker"),size:iconSize,scaledSize:iconSize}),google.maps.event.addListener(marker,"spider_click",function(e){func=clickFunction+"("+location.AssociatedId+")",eval(func)});var icon1=mapElement.data("marker"),icon2=mapElement.data("highlight"),info='<div class="google-popup"><img src="'+location.ImageUrl+'" class="map-image" /><p>'+location.Address1+", "+location.Postcode+"</p><p>"+location.Description+"</p></div>",infowindow=new google.maps.InfoWindow({content:info});return google.maps.event.addListener(marker,"mouseover",function(){infowindow.open(map,this),marker.setIcon(icon2)}),google.maps.event.addListener(marker,"mouseout",function(){infowindow.close(),marker.setIcon(icon1)}),oms.addMarker(marker),marker}),markerCluster=new MarkerClusterer(map,markers,{imagePath:"/hood/images/maps/m",maxZoom:15})}},GetPlaceholders:function(e){for(var o=/\{(\w+)\}/g,t=[];match===o.exec(e);)t.push(match[1]);return t}},$.hood||($.hood={}),$.hood.Admin={Init:function(){$(".navbar-nav .collapse").on("show.bs.collapse",function(){!function(e){var o=e.closest(".navbar-nav, .navbar-nav .nav").querySelectorAll(".collapse");[].forEach.call(o,function(o){o!==e&&$(o).collapse("hide")})}(this)}),$(".mobile-sidebar-toggle").on("click",function(){$("nav.sidebar").toggleClass("open")}),$(".right-sidebar-toggle").on("click",function(){$("#right-sidebar").toggleClass("sidebar-open")}),$(".alert.auto-dismiss").fadeTo(5e3,500).slideUp(500,function(){$(".alert.auto-dismiss").slideUp(500)}),$(".sidebar-scroll").slimScroll({height:"100%",railOpacity:.4,wheelStep:10}),$('[data-plugin="counter"]')&&$.counterUp&&$('[data-plugin="counter"]').counterUp({delay:10,time:800}),$.hood.Admin.Editors.Init(),$.hood.Admin.Stats.Init()},Editors:{Init:function(){tinymce.init({selector:".tinymce-full",height:150,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor media","searchreplace visualblocks code fullscreen","insertdatetime media contextmenu paste code"],toolbar:"styleselect | bold italic | alignleft aligncenter alignright | bullist numlist | link image media hoodimage | code",link_class_list:$.hood.LinkClasses,image_class_list:$.hood.ImageClasses,setup:$.hood.Media.Actions.Load.Insert,image_dimensions:!1}),tinymce.init({selector:".tinymce-simple",height:150,plugins:["advlist autolink lists link image charmap print preview anchor media","searchreplace visualblocks code fullscreen","insertdatetime media contextmenu paste code"],menubar:!1,toolbar:"bold italic | bullist numlist | undo redo | link",link_class_list:$.hood.LinkClasses,image_class_list:$.hood.ImageClasses,image_dimensions:!1}),tinymce.init({selector:".tinymce-full-content",height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor media","searchreplace visualblocks code fullscreen","insertdatetime media contextmenu paste code"],toolbar:"styleselect | bold italic | alignleft aligncenter alignright | bullist numlist | link image media hoodimage | code",link_class_list:$.hood.LinkClasses,image_class_list:$.hood.ImageClasses,setup:$.hood.Media.Actions.Load.Insert,image_dimensions:!1}),tinymce.init({selector:".tinymce-simple-content",height:500,plugins:["advlist autolink lists link image charmap print preview anchor media","searchreplace visualblocks code fullscreen","insertdatetime media contextmenu paste code"],menubar:!1,toolbar:"bold italic | bullist numlist | undo redo | link",link_class_list:$.hood.LinkClasses,image_class_list:$.hood.ImageClasses,image_dimensions:!1})}},Load:function(){$.hood.Admin.Resize()},Ready:function(){$.hood.Admin.CheckAndLoadTabs("#page-tabs"),$.hood.Admin.Resize()},Resize:function(){$(window).width()>768&&$(".content-body").css({"min-height":$(window).height()-216})},Stats:{Init:function(){$("#admin-stats-chart").exists()&&($.hood.Admin.Stats.SetupCharts(),$.get("/admin/stats/",function(e){$.hood.Admin.Stats.LoadStats(e),$.hood.Admin.Stats.DoCharts(e)}),$("body").on("change","#history",function(){$.get("/admin/stats/",function(e){$.hood.Admin.Stats.DoCharts(e)})}))},SetupCharts:function(){Chart.defaults.global.responsive=!0,Chart.defaults.global.maintainAspectRatio=!1,Chart.defaults.global.defaultColor="#6E84A3",Chart.defaults.global.defaultFontColor="#6E84A3",Chart.defaults.global.defaultFontFamily="",Chart.defaults.global.defaultFontSize=12,Chart.defaults.global.layout.padding=0,Chart.defaults.global.legend.display=!0,Chart.defaults.global.legend.position="bottom",Chart.defaults.global.legend.labels.usePointStyle=!0,Chart.defaults.global.legend.labels.padding=25,Chart.defaults.global.elements.point.radius=5,Chart.defaults.global.elements.point.backgroundColor="#000000",Chart.defaults.global.elements.line.tension=.4,Chart.defaults.global.elements.line.borderWidth=3,Chart.defaults.global.elements.line.borderColor="#aaaaaa",Chart.defaults.global.elements.line.backgroundColor="transparent",Chart.defaults.global.elements.line.borderCapStyle="round",Chart.defaults.global.elements.rectangle.backgroundColor="#aaaaaa",Chart.defaults.global.elements.arc.backgroundColor="#2C7BE5",Chart.defaults.global.elements.arc.borderColor="#152E4D",Chart.defaults.global.elements.arc.borderWidth=4,Chart.defaults.global.elements.arc.hoverBorderColor="#152E4D",Chart.defaults.global.tooltips.enabled=!0,Chart.defaults.global.tooltips.mode="nearest",Chart.defaults.global.tooltips.intersect=!1,Chart.scaleService.updateScaleDefaults("linear",{gridLines:{borderDash:[2],borderDashOffset:[2],color:"#dedede",drawBorder:!1,drawTicks:!1,zeroLineColor:"#dedede",zeroLineBorderDash:[2],zeroLineBorderDashOffset:[2]},ticks:{beginAtZero:!0,padding:10,callback:function(e){return e}}}),Chart.scaleService.updateScaleDefaults("category",{gridLines:{drawBorder:!1,drawOnChartArea:!1,drawTicks:!1},ticks:{padding:20},maxBarThickness:10})},DoCharts:function(e){var o=[],t=[],n="#6f42c1",r="#20c997",a="#fd7e14",s="#17a2b8";if(Number($("#history").val())<100){var i=[],l=e.content.days.slice(Math.max(e.content.days.length-Number($("#history").val()),1)),d=[];l.forEach(function(e){d.push(e.Value),i.push(e.Key)}),o.push({label:"New Content",data:d,borderColor:n,backgroundColor:n,pointBackgroundColor:n,pointBorderColor:"#ffffff"});var c=e.users.days.slice(Math.max(e.content.days.length-Number($("#history").val()),1));d=[],c.forEach(function(e){d.push(e.Value)}),o.push({label:"New Users",data:d,borderColor:a,backgroundColor:a,pointBackgroundColor:a,pointBorderColor:"#ffffff"});var u=e.subs.days.slice(Math.max(e.content.days.length-Number($("#history").val()),1));d=[],u.forEach(function(e){d.push(e.Value)}),o.push({label:"New Subscriptions",data:d,borderColor:s,backgroundColor:s,pointBackgroundColor:s,pointBorderColor:"#ffffff"});var h=e.properties.days.slice(Math.max(e.content.days.length-Number($("#history").val()),1));d=[],h.forEach(function(e){d.push(e.Value)}),o.push({label:"New Properties",data:d,borderColor:r,backgroundColor:r,pointBackgroundColor:r,pointBorderColor:"#ffffff"}),t=i}else{var p=[],f=[];e.content.months.forEach(function(e){f.push(e.Value),p.push(e.Key)}),o.push({label:"New Content",data:f,borderColor:n,backgroundColor:n,pointBackgroundColor:n,pointBorderColor:"#ffffff"}),f=[],e.users.months.forEach(function(e){f.push(e.Value)}),o.push({label:"New Users",data:f,borderColor:n,backgroundColor:n,pointBackgroundColor:n,pointBorderColor:"#ffffff"}),f=[],e.subs.months.forEach(function(e){f.push(e.Value)}),o.push({label:"New Subscriptions",data:f,borderColor:s,backgroundColor:s,pointBackgroundColor:s,pointBorderColor:"#ffffff"}),f=[],e.properties.months.forEach(function(e){f.push(e.Value)}),o.push({label:"New Properties",data:f,borderColor:r,backgroundColor:r,pointBackgroundColor:r,pointBorderColor:"#ffffff"}),t=p}var m=document.getElementById("admin-stats-chart");new Chart(m,{type:"bar",data:{labels:t,datasets:o},responsive:!0,maintainAspectRatio:!1,options:{events:[],tooltips:{enabled:!1},hover:{mode:null},responsive:!0,maintainAspectRatio:!1,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},LoadStats:function(e){for($(".content-totalPosts").text(e.content.totalPosts),$(".content-totalPublished").text(e.content.totalPublished),$(".users-totalUsers").text(e.users.totalUsers),$(".users-totalAdmins").text(e.users.totalAdmins),$(".subs-active").text(e.subs.active),$(".subs-trials").text(e.subs.trials),$(".properties-totalPosts").text(e.properties.totalPosts),$(".properties-totalPublished").text(e.properties.totalPublished),i=0;i<e.content.byType.length;i++)$(".content-"+e.content.byType[i].typeName+"-total").text(e.content.byType[i].total);$('[data-plugin="counterup"]').counterUp({delay:10,time:800})}},CheckAndLoadTabs:function(e){$(e).each(function(){var e=$('<li class="nav-item d-inline d-lg-none"></li>'),o=$('<div class="dropdown-menu"></ul>'),t=$('<ul class="navbar-nav"></ul>');$(this).find("> li").each(function(){var e=$(this).children("a:first-child"),o=$('<li class="nav-item"><a href="'+e.attr("href")+'" data-toggle="tab" class="nav-link tab-switch">'+e.html()+"</a></li>");t.append(o),$(this).addClass("d-none d-lg-inline")}),e.append('<a class="nav-link dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><i class="fa fa-eye mr-2"></i><span>Choose View</span></button>'),o.append(t),e.append(o),$(this).prepend(e)}),$(e+' a[data-toggle="tab"]').on("shown.bs.tab",function(o){localStorage.setItem("tab-"+$(e).data("id"),$(o.target).attr("href"))});var o=localStorage.getItem("tab-"+$(e).data("id"));o?$(e+' a[href="'+o+'"]').tab("show"):$(e+' a[data-toggle="tab"]').first().tab("show")}},$(document).ready($.hood.Admin.Ready),$(window).on("load",$.hood.Admin.Load),$(window).on("resize",$.hood.Admin.Resize),$.hood.Admin.Init();