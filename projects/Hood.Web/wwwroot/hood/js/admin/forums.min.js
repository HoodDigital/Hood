"use strict";$.hood||($.hood={}),$.hood.Forums={Init:function(){$("body").on("click",".forum-delete",$.hood.Forums.Delete),$("body").on("click",".forum-archive",$.hood.Forums.Archive),$("body").on("click",".forum-publish",$.hood.Forums.Publish),$("body").on("click",".forum-categories-delete",$.hood.Forums.Categories.Delete),$("body").on("change",".forum-categories-check",$.hood.Forums.Categories.ToggleCategory),$("body").on("keyup","#Slug",function(){$(".slug-display").html($(this).val())}),$("#edit-forum").doesExist()&&$.hood.Forums.Edit.Init()},Lists:{Forums:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#forum-list").doesExist()&&$.hood.Inline.Reload($("#forum-list"),e)}},Categories:{Loaded:function(e,o){$.hood.Loader(!1)},Reload:function(e){$("#forum-categories-list").doesExist()&&$.hood.Inline.Reload($("#forum-categories-list"),e)}}},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Forums.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>Forum deleted, redirecting...</strong><br />Just taking you back to the forum list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The forum will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')},Publish:function(e){var o=$(this);swal({title:"Are you sure?",text:"The item will be visible on the website.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, cancel!",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,closeOnCancel:!1},function(e){e?$.post("/admin/forums/publish/"+o.data("id"),null,function(e){e.Success?(swal({title:"Published!",text:"The item has now been published.",timer:1300,type:"success"}),setTimeout(function(){window.location=e.Url},500)):swal({title:"Error!",text:"There was a problem publishing the item: "+e.Errors,timer:5e3,type:"error"})}):swal("Cancelled","It's all good in the hood!","error")})},Archive:function(e){var o=$(this);swal({title:"Are you sure?",text:"The item will be hidden from the website.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, cancel!",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,closeOnCancel:!1},function(e){e?$.post("/admin/forums/archive/"+o.data("id"),null,function(e){e.Success?(swal({title:"Archived!",text:"The item has now been archived.",timer:1300,type:"success"}),setTimeout(function(){window.location=e.Url},500)):swal({title:"Error!",text:"There was a problem archiving the item: "+e.Errors,timer:5e3,type:"error"})}):swal("Cancelled","It's all good in the hood!","error")})},Create:function(){$("#forum-create-form").find(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$("#forum-create-form").hoodValidator({validationRules:{Title:{required:!0},Description:{required:!0}},submitButtonTag:$("#forum-create-submit"),submitUrl:$("#forum-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Forums.Reload()}})},Edit:{Init:function(){$(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$(".datetimepicker").datetimepicker({locale:"en-gb",format:"LT"})}},Categories:{Editor:function(){$("#forum-categories-edit-form").hoodValidator({validationRules:{DisplayName:{required:!0},Slug:{required:!0}},submitButtonTag:$("#forum-categories-edit-submit"),submitUrl:$("#forum-categories-edit-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Categories.Reload()}})},ToggleCategory:function(){$.post($(this).data("url"),{categoryId:$(this).val(),add:$(this).is(":checked")},function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Categories.Reload()})},Delete:function(e){e.preventDefault();var o=$(this),t=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Forums.Lists.Categories.Reload()})};$.hood.Alerts.Confirm("The category will be permanently removed.","Are you sure?",t,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong></span>')}}},$(document).ready($.hood.Forums.Init);