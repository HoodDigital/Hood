"use strict";function initGoogleMapsComplete(){$("#address-autocomplete").length>0&&$.hood.Google.Addresses.InitAutocomplete(),$.hood.Google.Maps(),$.hood.Google.ClusteredMap();try{initMap()}catch(e){$.noop()}}$.hood||($.hood={}),$.hood.Google={Maps:function(){$(".google-map").each(function(){var e=new google.maps.LatLng($(this).data("lat"),$(this).data("long"));console.log("Loading map at: "+$(this).data("lat")+", "+$(this).data("long"));var o=new google.maps.Map(this,{zoom:$(this).data("zoom")||15,center:e,scrollwheel:!1});new google.maps.Marker({position:e,map:o,title:$(this).data("marker")});$(window).resize(function(){google.maps.event.trigger(o,"resize")}),google.maps.event.trigger(o,"resize")})},Addresses:{AddressForm:{QuickName:"{route}, {postal_town}, {postal_code}",Number:"{street_number}",Address1:"{route}",Address2:"{locality}",City:"{postal_town}",County:"{administrative_area_level_2}",Country:"{country}",Postcode:"{postal_code}"},placeSearch:null,place:null,autocomplete:null,InitAutocomplete:function(){this.autocomplete=new google.maps.places.Autocomplete(document.getElementById("address-autocomplete"),{types:["geocode"]}),this.autocomplete.addListener("place_changed",$.hood.Google.Addresses.FillInAddress)},FillInAddress:function(){$.hood.Google.Addresses.place=$.hood.Google.Addresses.autocomplete.getPlace();for(var e in $.hood.Google.Addresses.AddressForm)if($("#"+e).doesExist()){$("#"+e).val("");var o=$.hood.Google.Addresses.AddressForm[e],a=$.hood.Google.GetPlaceholders(o);for(var t in a)o=o.replace("{"+a[t]+"}",$.hood.Google.Addresses.GetValueFromAddressComponents(a[t]));o.contains("undefined")||$("#"+e).val(o)}$("#Latitude").val($.hood.Google.Addresses.place.geometry.location.lat),$("#Longitude").val($.hood.Google.Addresses.place.geometry.location.lng)},GetValueFromAddressComponents:function(e){for(var o=0;o<$.hood.Google.Addresses.place.address_components.length;o++){if($.hood.Google.Addresses.place.address_components[o].types[0]===e)return $.hood.Google.Addresses.place.address_components[o].long_name}},GeoLocate:function(){navigator.geolocation&&navigator.geolocation.getCurrentPosition(function(e){var o={lat:e.coords.latitude,lng:e.coords.longitude},a=new google.maps.Circle({center:o,radius:e.coords.accuracy});$.hood.Google.Addresses.autocomplete.setBounds(a.getBounds())})}},ClusteredMap:function ClusteredMap(){var mapElement=$("#clustered-map");if(mapElement.length){var scrollWheel=!1;mapElement.attr("data-scrollwheel")&&(scrollWheel=mapElement.data("scrollwheel"));var zoom=!1;mapElement.attr("data-zoom")&&(zoom=mapElement.data("zoom"));var map=new google.maps.Map(document.getElementById("clustered-map"),{zoom:zoom,maxZoom:18,scrollwheel:scrollWheel,center:{lat:mapElement.data("lat"),lng:mapElement.data("long")}}),oms=new OverlappingMarkerSpiderfier(map,{markersWontMove:!0,markersWontHide:!0,basicFormatEvents:!0,circleFootSeparation:80,spiralFootSeparation:80}),iconSize=new google.maps.Size(30,41),labels="ABCDEFGHIJKLMNOPQRSTUVWXYZ",locations=mapElement.data("locations"),clickFunction=mapElement.data("click"),markers=locations.map(function(location,i){var marker=new google.maps.Marker({position:new google.maps.LatLng(location.Latitude,location.Longitude),optimized:!isIE});marker.setIcon({url:mapElement.data("marker"),size:iconSize,scaledSize:iconSize}),google.maps.event.addListener(marker,"spider_click",function(e){func=clickFunction+"("+location.AssociatedId+")",eval(func)});var icon1=mapElement.data("marker"),icon2=mapElement.data("highlight"),info='<div class="google-popup"><img src="'+location.ImageUrl+'" class="map-image" /><p>'+location.Address1+", "+location.Postcode+"</p><p>"+location.Description+"</p></div>",infowindow=new google.maps.InfoWindow({content:info});return google.maps.event.addListener(marker,"mouseover",function(){infowindow.open(map,this),marker.setIcon(icon2)}),google.maps.event.addListener(marker,"mouseout",function(){infowindow.close(),marker.setIcon(icon1)}),oms.addMarker(marker),marker}),markerCluster=new MarkerClusterer(map,markers,{imagePath:"https://cdn.jsdelivr.net/npm/hoodcms/images/maps/m",maxZoom:15})}},GetPlaceholders:function(e){for(var o=/\{(\w+)\}/g,a=[];match===o.exec(e);)a.push(match[1]);return a}};