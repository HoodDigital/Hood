var hood=(function(exports,swal,bootstrap,chart_js,tinymce,Pickr){'use strict';function _interopDefaultLegacy(e){return e&&typeof e==='object'&&'default'in e?e:{'default':e}}function _interopNamespace(e){if(e&&e.__esModule)return e;var n=Object.create(null);if(e){Object.keys(e).forEach(function(k){if(k!=='default'){var d=Object.getOwnPropertyDescriptor(e,k);Object.defineProperty(n,k,d.get?d:{enumerable:true,get:function(){return e[k];}});}});}n['default']=e;return Object.freeze(n);}var swal__default=/*#__PURE__*/_interopDefaultLegacy(swal);var bootstrap__namespace=/*#__PURE__*/_interopNamespace(bootstrap);var tinymce__default=/*#__PURE__*/_interopDefaultLegacy(tinymce);var Pickr__default=/*#__PURE__*/_interopDefaultLegacy(Pickr);/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */
var extendStatics=function(t,e){return (extendStatics=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e;}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r]);})(t,e)};function __extends(t,e){function r(){this.constructor=t;}extendStatics(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r);}var __assign=function(){return (__assign=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var o in e=arguments[r])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)};/*! Copyright (c) 2011 Piotr Rochala (http://rocha.la)
 * Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)
 * and GPL (http://www.opensource.org/licenses/gpl-license.php) licenses.
 *
 * Version: 1.3.8
 *
 */
!function(e){e.fn.extend({slimScroll:function(i){var s=e.extend({width:"auto",height:"250px",size:"7px",color:"#000",position:"right",distance:"1px",start:"top",opacity:.4,alwaysVisible:!1,disableFadeOut:!1,railVisible:!1,railColor:"#333",railOpacity:.2,railDraggable:!0,railClass:"slimScrollRail",barClass:"slimScrollBar",wrapperClass:"slimScrollDiv",allowPageScroll:!1,wheelStep:20,touchScrollStep:200,borderRadius:"7px",railBorderRadius:"7px"},i);return this.each((function(){var o,a,r,l,n,c,h,u,p="<div></div>",d=!1,g=e(this);if(g.parent().hasClass(s.wrapperClass)){var f=g.scrollTop();if(x=g.siblings("."+s.barClass),y=g.siblings("."+s.railClass),E(),e.isPlainObject(i)){if("height"in i&&"auto"==i.height){g.parent().css("height","auto"),g.css("height","auto");var b=g.parent().parent().height();g.parent().css("height",b),g.css("height",b);}else if("height"in i){var v=i.height;g.parent().css("height",v),g.css("height",v);}if("scrollTo"in i)f=parseInt(s.scrollTo);else if("scrollBy"in i)f+=parseInt(s.scrollBy);else if("destroy"in i)return x.remove(),y.remove(),void g.unwrap();S(f,!1,!0);}}else if(!e.isPlainObject(i)||!("destroy"in i)){s.height="auto"==s.height?g.parent().height():s.height;var w=e(p).addClass(s.wrapperClass).css({position:"relative",overflow:"hidden",width:s.width,height:s.height});g.css({overflow:"hidden",width:s.width,height:s.height});var m,y=e(p).addClass(s.railClass).css({width:s.size,height:"100%",position:"absolute",top:0,display:s.alwaysVisible&&s.railVisible?"block":"none","border-radius":s.railBorderRadius,background:s.railColor,opacity:s.railOpacity,zIndex:90}),x=e(p).addClass(s.barClass).css({background:s.color,width:s.size,position:"absolute",top:0,opacity:s.opacity,display:s.alwaysVisible?"block":"none","border-radius":s.borderRadius,BorderRadius:s.borderRadius,MozBorderRadius:s.borderRadius,WebkitBorderRadius:s.borderRadius,zIndex:99}),C="right"==s.position?{right:s.distance}:{left:s.distance};y.css(C),x.css(C),g.wrap(w),g.parent().append(x),g.parent().append(y),s.railDraggable&&x.bind("mousedown",(function(i){var s=e(document);return r=!0,t=parseFloat(x.css("top")),pageY=i.pageY,s.bind("mousemove.slimscroll",(function(e){currTop=t+e.pageY-pageY,x.css("top",currTop),S(0,x.position().top,!1);})),s.bind("mouseup.slimscroll",(function(e){r=!1,D(),s.unbind(".slimscroll");})),!1})).bind("selectstart.slimscroll",(function(e){return e.stopPropagation(),e.preventDefault(),!1})),y.hover((function(){R();}),(function(){D();})),x.hover((function(){a=!0;}),(function(){a=!1;})),g.hover((function(){o=!0,R(),D();}),(function(){o=!1,D();})),g.bind("touchstart",(function(e,t){e.originalEvent.touches.length&&(n=e.originalEvent.touches[0].pageY);})),g.bind("touchmove",(function(e){(d||e.originalEvent.preventDefault(),e.originalEvent.touches.length)&&(S((n-e.originalEvent.touches[0].pageY)/s.touchScrollStep,!0),n=e.originalEvent.touches[0].pageY);})),E(),"bottom"===s.start?(x.css({top:g.outerHeight()-x.outerHeight()}),S(0,!0)):"top"!==s.start&&(S(e(s.start).position().top,null,!0),s.alwaysVisible||x.hide()),m=this,window.addEventListener?(m.addEventListener("DOMMouseScroll",H,!1),m.addEventListener("mousewheel",H,!1)):document.attachEvent("onmousewheel",H);}function H(t){if(o){var i=0;(t=t||window.event).wheelDelta&&(i=-t.wheelDelta/120),t.detail&&(i=t.detail/3);var a=t.target||t.srcTarget||t.srcElement;e(a).closest("."+s.wrapperClass).is(g.parent())&&S(i,!0),t.preventDefault&&!d&&t.preventDefault(),d||(t.returnValue=!1);}}function S(e,t,i){d=!1;var o=e,a=g.outerHeight()-x.outerHeight();if(t&&(o=parseInt(x.css("top"))+e*parseInt(s.wheelStep)/100*x.outerHeight(),o=Math.min(Math.max(o,0),a),o=e>0?Math.ceil(o):Math.floor(o),x.css({top:o+"px"})),o=(h=parseInt(x.css("top"))/(g.outerHeight()-x.outerHeight()))*(g[0].scrollHeight-g.outerHeight()),i){var r=(o=e)/g[0].scrollHeight*g.outerHeight();r=Math.min(Math.max(r,0),a),x.css({top:r+"px"});}g.scrollTop(o),g.trigger("slimscrolling",~~o),R(),D();}function E(){c=Math.max(g.outerHeight()/g[0].scrollHeight*g.outerHeight(),30),x.css({height:c+"px"});var e=c==g.outerHeight()?"none":"block";x.css({display:e});}function R(){if(E(),clearTimeout(l),h==~~h){if(d=s.allowPageScroll,u!=h){var e=0==~~h?"top":"bottom";g.trigger("slimscroll",e);}}else d=!1;u=h,c>=g.outerHeight()?d=!0:(x.stop(!0,!0).fadeIn("fast"),s.railVisible&&y.stop(!0,!0).fadeIn("fast"));}function D(){s.alwaysVisible||(l=setTimeout((function(){s.disableFadeOut&&o||a||r||(x.fadeOut("slow"),y.fadeOut("slow"));}),1e3));}})),this}}),e.fn.extend({slimscroll:e.fn.slimScroll});}(jQuery);"function"!=typeof Object.create&&(Object.create=function(t){function o(){}return o.prototype=t,new o}),function(t,o,i,s){var n={_positionClasses:["bottom-left","bottom-right","top-right","top-left","bottom-center","top-center","mid-center"],_defaultIcons:["success","error","info","warning"],init:function(o,i){this.prepareOptions(o,t.toast.options),this.process();},prepareOptions:function(o,i){var s={};"string"==typeof o||o instanceof Array?s.text=o:s=o,this.options=t.extend({},i,s);},process:function(){this.setup(),this.addToDom(),this.position(),this.bindToast(),this.animate();},setup:function(){var o="";if(this._toastEl=this._toastEl||t("<div></div>",{class:"jq-toast-single"}),o+='<span class="jq-toast-loader"></span>',this.options.allowToastClose&&(o+='<span class="close-jq-toast-single">&times;</span>'),this.options.text instanceof Array){this.options.heading&&(o+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),o+='<ul class="jq-toast-ul">';for(var i=0;i<this.options.text.length;i++)o+='<li class="jq-toast-li" id="jq-toast-item-'+i+'">'+this.options.text[i]+"</li>";o+="</ul>";}else this.options.heading&&(o+='<h2 class="jq-toast-heading">'+this.options.heading+"</h2>"),o+=this.options.text;this._toastEl.html(o),!1!==this.options.bgColor&&this._toastEl.css("background-color",this.options.bgColor),!1!==this.options.textColor&&this._toastEl.css("color",this.options.textColor),this.options.textAlign&&this._toastEl.css("text-align",this.options.textAlign),!1!==this.options.icon&&(this._toastEl.addClass("jq-has-icon"),-1!==t.inArray(this.options.icon,this._defaultIcons)&&this._toastEl.addClass("jq-icon-"+this.options.icon)),!1!==this.options.class&&this._toastEl.addClass(this.options.class);},position:function(){"string"==typeof this.options.position&&-1!==t.inArray(this.options.position,this._positionClasses)?"bottom-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,bottom:20}):"top-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,top:20}):"mid-center"===this.options.position?this._container.css({left:t(o).outerWidth()/2-this._container.outerWidth()/2,top:t(o).outerHeight()/2-this._container.outerHeight()/2}):this._container.addClass(this.options.position):"object"==typeof this.options.position?this._container.css({top:this.options.position.top?this.options.position.top:"auto",bottom:this.options.position.bottom?this.options.position.bottom:"auto",left:this.options.position.left?this.options.position.left:"auto",right:this.options.position.right?this.options.position.right:"auto"}):this._container.addClass("bottom-left");},bindToast:function(){var t=this;this._toastEl.on("afterShown",(function(){t.processLoader();})),this._toastEl.find(".close-jq-toast-single").on("click",(function(o){o.preventDefault(),"fade"===t.options.showHideTransition?(t._toastEl.trigger("beforeHide"),t._toastEl.fadeOut((function(){t._toastEl.trigger("afterHidden");}))):"slide"===t.options.showHideTransition?(t._toastEl.trigger("beforeHide"),t._toastEl.slideUp((function(){t._toastEl.trigger("afterHidden");}))):(t._toastEl.trigger("beforeHide"),t._toastEl.hide((function(){t._toastEl.trigger("afterHidden");})));})),"function"==typeof this.options.beforeShow&&this._toastEl.on("beforeShow",(function(){t.options.beforeShow();})),"function"==typeof this.options.afterShown&&this._toastEl.on("afterShown",(function(){t.options.afterShown();})),"function"==typeof this.options.beforeHide&&this._toastEl.on("beforeHide",(function(){t.options.beforeHide();})),"function"==typeof this.options.afterHidden&&this._toastEl.on("afterHidden",(function(){t.options.afterHidden();}));},addToDom:function(){var o=t(".jq-toast-wrap");if(0===o.length?(o=t("<div></div>",{class:"jq-toast-wrap"}),t("body").append(o)):(!this.options.stack||isNaN(parseInt(this.options.stack,10)))&&o.empty(),o.find(".jq-toast-single:hidden").remove(),o.append(this._toastEl),this.options.stack&&!isNaN(parseInt(this.options.stack),10)){var i=o.find(".jq-toast-single").length-this.options.stack;i>0&&t(".jq-toast-wrap").find(".jq-toast-single").slice(0,i).remove();}this._container=o;},canAutoHide:function(){return !1!==this.options.hideAfter&&!isNaN(parseInt(this.options.hideAfter,10))},processLoader:function(){if(!this.canAutoHide()||!1===this.options.loader)return !1;var t=this._toastEl.find(".jq-toast-loader"),o=(this.options.hideAfter-400)/1e3+"s",i=this.options.loaderBg,s=t.attr("style")||"";s=s.substring(0,s.indexOf("-webkit-transition")),s+="-webkit-transition: width "+o+" ease-in;                       -o-transition: width "+o+" ease-in;                       transition: width "+o+" ease-in;                       background-color: "+i+";",t.attr("style",s).addClass("jq-toast-loaded");},animate:function(){var t=this;if(this._toastEl.hide(),this._toastEl.trigger("beforeShow"),"fade"===this.options.showHideTransition.toLowerCase()?this._toastEl.fadeIn((function(){t._toastEl.trigger("afterShown");})):"slide"===this.options.showHideTransition.toLowerCase()?this._toastEl.slideDown((function(){t._toastEl.trigger("afterShown");})):this._toastEl.show((function(){t._toastEl.trigger("afterShown");})),this.canAutoHide()){t=this;o.setTimeout((function(){"fade"===t.options.showHideTransition.toLowerCase()?(t._toastEl.trigger("beforeHide"),t._toastEl.fadeOut((function(){t._toastEl.trigger("afterHidden");}))):"slide"===t.options.showHideTransition.toLowerCase()?(t._toastEl.trigger("beforeHide"),t._toastEl.slideUp((function(){t._toastEl.trigger("afterHidden");}))):(t._toastEl.trigger("beforeHide"),t._toastEl.hide((function(){t._toastEl.trigger("afterHidden");})));}),this.options.hideAfter);}},reset:function(o){"all"===o?t(".jq-toast-wrap").remove():this._toastEl.remove();},update:function(t){this.prepareOptions(t,this.options),this.setup(),this.bindToast();}};t.toast=function(t){var o=Object.create(n);return o.init(t,this),{reset:function(t){o.reset(t);},update:function(t){o.update(t);}}},t.toast.options={text:"",heading:"",showHideTransition:"fade",allowToastClose:!0,hideAfter:3e3,loader:!0,loaderBg:"#9EC600",stack:5,position:"bottom-left",bgColor:!1,textColor:!1,textAlign:"left",icon:!1,beforeShow:function(){},afterShown:function(){},beforeHide:function(){},afterHidden:function(){}};}(jQuery,window);var BootstrapSwal=swal__default['default'].mixin({customClass:{confirmButton:"btn btn-success btn-lg m-1 pl-4 pr-4",cancelButton:"btn btn-danger btn-lg m-1"},buttonsStyling:!1}),Alerts=function(){function t(){}return t.log=function(t,o){if(void 0===o&&(o="message"),document.body.classList.contains("dev-mode"))switch(o){case"error":console.error(t);break;case"message":console.log(t);break;case"warning":console.warn(t);break;case"info":console.info(t);}},t.error=function(t,o,e){void 0===o&&(o=null),void 0===e&&(e=null),$.toast({heading:o,text:t,icon:"error",position:"bottom-left",loader:!1,bgColor:"#d0100b",textColor:"white",hideAfter:e});},t.warning=function(t,o,e){void 0===o&&(o=null),void 0===e&&(e=null),$.toast({heading:o,text:t,icon:"error",position:"bottom-left",loader:!1,bgColor:"#ef9007",textColor:"white",hideAfter:e});},t.message=function(t,o,e){void 0===o&&(o=null),void 0===e&&(e=null),$.toast({heading:o,text:t,icon:"error",position:"bottom-left",loader:!1,bgColor:"#222222",textColor:"white",hideAfter:e});},t.success=function(t,o,e){void 0===o&&(o=null),void 0===e&&(e=null),$.toast({heading:o,text:t,icon:"error",position:"bottom-left",loader:!1,bgColor:"#28a745",textColor:"white",hideAfter:e});},t.alert=function(o,e,n,i){switch(void 0===e&&(e=null),void 0===n&&(n="info"),void 0===i&&(i=1e4),n){case"error":t.error(o,e,i);break;case"warning":t.warning(o,e,i);break;case"info":t.message(o,e,i);break;case"success":t.success(o,e,i);}},t.sweetAlert=function(t,o){BootstrapSwal.fire(t).then((function(t){o(t);}));},t.confirm=function(o,e){t.sweetAlert(__assign(__assign({},{showCancelButton:!0,footer:'<span class="text-warning"><i class="fa fa-exclamation-triangle"></i> This cannot be undone.</span>',title:"Are you sure?",html:"Are you sure you want to do this?",confirmButtonText:"Ok",cancelButtonText:"Cancel"}),o),e);},t.prompt=function(o,e){t.sweetAlert(__assign(__assign({},{input:"text",inputAttributes:{autocapitalize:"off"},showCancelButton:!0,icon:"info",footer:'<span class="text-warning"><i class="fa fa-exclamation-triangle"></i> This cannot be undone.</span>',confirmButtonText:"Ok",cancelButtonText:"Cancel"}),o),e);},t}();$.fn.exists=function(){return $(this).length},$.fn.restrictToSlug=function(t){void 0===t&&(t=/[^0-9a-zA-Z]*/g);var n=$(this),e=function(){var n=$(this).val(),e=n.replace(t,"");n!==e&&$(this).val(e);};n.on("keyup",e),n.on("paste",e),n.on("change",e);},$.fn.restrictToPageSlug=function(t){void 0===t&&(t=/[^0-9a-zA-Z-//]*/g);var n=$(this),e=function(){var n=$(this).val(),e=n.replace(t,"");if((e.match(new RegExp("/","g"))||[]).length>4){var a=e.lastIndexOf("/");e=e.substring(0,a)+e.substring(a+1),Alerts.warning("You can only have up to 4 '/' characters in a url slug.");}n!==e&&$(this).val(e);};n.on("keyup",e),n.on("paste",e),n.on("change",e);},$.fn.restrictToMetaSlug=function(t){void 0===t&&(t=/[^0-9a-zA-Z.]*/g);var n=$(this),e=function(){var n=$(this).val(),e=n.replace(t,"");if((e.match(new RegExp(".","g"))||[]).length>1){var a=e.lastIndexOf(".");e=e.substring(0,a)+e.substring(a+1),Alerts.warning("You can only have up to 1 '.' characters in a meta slug.");}n!==e&&$(this).val(e);};n.on("keyup",e),n.on("paste",e),n.on("change",e);},$.fn.characterCounter=function(){var t=$(this),n=function(){var t=$(this).data("counter"),n=Number($(this).attr("maxlength")),e=$(this).val().length;$(t).text(n-e);var a="text-success";n-e<n/10&&(a="text-danger"),$(t).parent().removeClass("text-success").removeClass("text-danger").addClass(a);};t.on("keyup",n),t.on("paste",n),t.on("change",n);},$.fn.warningAlert=function(){$(this).on("click",(function(t){t.preventDefault();return Alerts.confirm({title:$(t.currentTarget).data("title"),html:$(t.currentTarget).data("warning"),footer:$(t.currentTarget).data("footer"),icon:"warning"},(function(n){if(n.isConfirmed){var e=$(t.currentTarget).attr("href");window.location.href=e;}})),!1}));};
Number.prototype.formatCurrency=function(t){return t+" "+this.toFixed(2).replace(/./g,(function(t,e,r){return e>0&&"."!==t&&(r.length-e)%3==0?","+t:t}))},Number.prototype.formatKilobytes=function(){return (this/1024).toFixed(0).replace(/./g,(function(t,e,r){return e>0&&"."!==t&&(r.length-e)%3==0?","+t:t}))+"Kb"},Number.prototype.formatMegabytes=function(){var t=this/1024;return (t/=1024).toFixed(0).replace(/./g,(function(t,e,r){return e>0&&"."!==t&&(r.length-e)%3==0?","+t:t}))+"Mb"};String.prototype.htmlEncode=function(){return $("<div/>").text(this).html()},String.prototype.htmlDecode=function(){return $("<div/>").html(this).text()},String.prototype.contains=function(t){return -1!==this.indexOf(t)},String.prototype.pick=function(t,r){var o,n="";o=void 0===r?t:t+Math.floor(Math.random()*(r-t));for(var e=0;e<o;e++)n+=this.charAt(Math.floor(Math.random()*this.length));return n},String.prototype.shuffle=function(){var t,r,o=this.split(""),n=o.length;if(n)for(;--n;)t=o[r=Math.floor(Math.random()*(n+1))],o[r]=o[n],o[n]=t;return o.join("")},String.prototype.toSeoUrl=function(){var t=this.replace(/[^a-zA-Z0-9]/g," ").replace(/\s+/g,"-").toLowerCase();"-"===t.charAt(0)&&(t=t.substring(1));var r=t.length-1;return "-"===t.charAt(r)&&(t=t.substring(0,r)),t};var Handlers=function(){function t(){}return t.prototype.initDefaultHandlers=function(){this.checkboxToCsvInput(),this.iconSelector(),this.initSelectValues(),this.scrollHandlers(),this.selectText(),this.setValueOnClick(),this.submitOnChange();},t.prototype.initSelectValues=function(t){void 0===t&&(t="body"),$(t).find("select[data-selected]").each(this.initSelectValuesHandler);},t.prototype.initSelectValuesHandler=function(t,e){var o=$(this).data("selected");if("undefined"!==o&&""!==o){var a=String(o);$(this).val(a);}},t.prototype.iconSelector=function(t){void 0===t&&(t="body"),$(t).find("[data-hood-icon]").each(this.iconSelectorHandler);},t.prototype.iconSelectorHandler=function(t,e){var o=$(this).find("input[data-hood-icon-input]"),a=$(this).find("[data-hood-icon-display]"),n=$(this).find(".collapse");$(this).find("[data-hood-icon-key][data-hood-icon-value]").on("click",(function(){var t=$(this).data("hoodIconKey"),e=$(this).data("hoodIconValue");a.html(e),o.val(t),n&&n.removeClass("show");}));},t.prototype.selectText=function(t){void 0===t&&(t="body"),$(t).on("click",".select-text",this.selectTextHandler);},t.prototype.selectTextHandler=function(){var t=$(this);t.select(),t.mouseup((function(){return t.unbind("mouseup"),!1}));},t.prototype.scrollHandlers=function(t){void 0===t&&(t="body"),$(t).on("click",".scroll-top, .scroll-to-top",this.scrollTop),$(t).on("click",".scroll-target, .scroll-to-target",this.scrollTarget),$(t).on("click",".scroll-target-direct, .scroll-to-target-direct",this.scrollTargetDirect);},t.prototype.scrollTop=function(t){return t&&t.preventDefault(),$("html, body").animate({scrollTop:0},800),!1},t.prototype.scrollTarget=function(t){t&&t.preventDefault();var e=$(this).attr("href").split("#")[0];if(e===window.location.pathname||""===e){var o=this.hash,a=$(o),n=$("header.header"),i=0;n&&(i=n.height()),$(this).data("offset")?$("html, body").stop().animate({scrollTop:a.offset().top-$(this).data("offset")},900,"swing"):$("html, body").stop().animate({scrollTop:a.offset().top-i},900,"swing");}},t.prototype.scrollTargetDirect=function(){var t=$("body").scrollTop(),e=$($(this).attr("href")).offset().top;return $("html, body").animate({scrollTop:e},Math.abs(e-t)),!1},t.prototype.checkboxToCsvInput=function(t){void 0===t&&(t="body"),$(t).on("change","input[type=checkbox][data-hood-csv-input]",this.checkboxToCsvInputHandler);},t.prototype.checkboxToCsvInputHandler=function(t){t&&t.preventDefault();var e=new Array;$('input[data-hood-csv-input="'+$(this).data("hoodCsvInput")+'"]').each((function(){$(this).is(":checked")&&e.push($(this).val());}));var o="#"+$(this).data("input"),a=JSON.stringify(e);$(o).val(a);},t.prototype.submitOnChange=function(t){void 0===t&&(t="body"),$(t).on("change",".submit-on-change",this.submitOnChangeHandler);},t.prototype.submitOnChangeHandler=function(t){t&&t.preventDefault(),$(this).parents("form").submit();},t.prototype.setValueOnClick=function(t){void 0===t&&(t="body"),$(t).on("click",".click-select[data-target][data-value]",this.setValueOnClickHandler);},t.prototype.setValueOnClickHandler=function(){var t=$(this),e="#"+t.data("target");$(e).val(t.data("value")),$(e).trigger("change"),$('.click-select.clean[data-target="'+t.data("target")+'"]').each((function(){$(this).removeClass("active");})),$('.click-select.clean[data-target="'+t.data("target")+'"][data-value="'+t.data("value")+'"]').each((function(){$(this).addClass("active");}));},t}();var Response=function(){function e(){}return e.process=function(e,s){void 0===s&&(s=5e3),e.success?Alerts.success(e.message,e.title,s):Alerts.error(e.errors,e.title,s);},e}();var Inline=function(){function o(){}return o.load=function(n,r){var t,l=$(n);l.addClass("loading"),r.onLoad&&r.onLoad(n);var e=l.data("url");$.get(e,(function(o){r.onRender&&(o=r.onRender(o,n)),l.html(o),l.removeClass("loading"),r.onComplete&&r.onComplete(o,n);})).fail(null!==(t=r.onError)&&void 0!==t?t:o.handleError);},o.task=function(n,r,t,l){void 0===t&&(t=null),void 0===l&&(l=null),r&&r.classList.add("loading"),$.get(n,(function(o){r&&r.classList.remove("loading"),t&&t(o,r);})).fail(null!=l?l:o.handleError);},o.post=function(n,r,t,l){void 0===t&&(t=null),void 0===l&&(l=null),r&&r.classList.add("loading"),$.post(n,(function(o){r&&r.classList.remove("loading"),t&&t(o,r);})).fail(null!=l?l:o.handleError);},o.handleError=function(o){500===o.status?Alerts.error("There was an error processing the content, please contact an administrator if this continues.","Error "+o.status):404===o.status?Alerts.error("The content could not be found.","Error "+o.status):401===o.status&&(Alerts.error("You are not allowed to view this resource, are you logged in correctly?","Error "+o.status),window.location=window.location);},o}();var DataList=function(){function e(e,t){if(this.element=e,this.element.hoodDataList=this,void 0!==e&&null!=e){if(this.options=__assign(__assign({},this.options),t),$(this.element).hasClass("query")){var n=$(this.element).data("url")+window.location.search;$(this.element).attr("data-url",n),$(this.element).data("url",n);}if(!$(this.element).hasClass("refresh-only")){var i=document.createElement("a");i.href=$(this.element).data("url"),this.reload(new URL(i.href));}$(this.element).on("click",".pagination a, a.hood-inline-list-target",function(e){e.preventDefault();var t=document.createElement("a");t.href=e.currentTarget.href;var n=document.createElement("a");n.href=$(this.element).data("url"),n.search=t.search,this.reload(new URL(n.href));}.bind(this)),$("body").on("submit",'form.inline[data-target="#'+this.element.id+'"]',function(e){e.preventDefault();var t=$(e.currentTarget),n=document.createElement("a");n.href=$(this.element).data("url"),n.search="?"+t.serialize(),this.reload(new URL(n.href));}.bind(this));}else Alerts.log("Could not DataList to element, element does not exist.","error");}return e.prototype.reload=function(e){if(void 0===e&&(e=null),e){if(history.pushState&&$(this.element).hasClass("query")){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+(e.href.contains("?")?"?"+e.href.substring(e.href.indexOf("?")+1):"");window.history.pushState({path:t},"",t);}$(this.element).data("url",e);}Inline.load(this.element,__assign({},this.options));},e}();
var ModalController=function(){function o(o){void 0===o&&(o=null),this.options={closePrevious:!0},this.options=__assign(__assign({},this.options),o);}return o.prototype.show=function(o,t){var e;this.options.onLoad&&this.options.onLoad(this.element),$.get(o,function(o){this.modal&&this.options.closePrevious&&this.close(),this.options.onRender&&(o=this.options.onRender(this.element,o)),this.element=this.createElementFromHTML(o),this.element.classList.add("hood-inline-modal"),$("body").append(this.element),this.modal=new bootstrap.Modal(this.element,{}),this.modal.show(),this.element.addEventListener("shown.bs.modal",function(){$(document).off("focusin.modal");}.bind(this)),this.element.addEventListener("hidden.bs.modal",function(){this.dispose();}.bind(this)),this.options.onComplete&&this.options.onComplete(this.element);}.bind(this)).fail(null!==(e=this.options.onError)&&void 0!==e?e:Inline.handleError);},o.prototype.close=function(){this.modal&&this.modal.hide();},o.prototype.dispose=function(){this.modal.dispose(),this.element.remove();},o.prototype.createElementFromHTML=function(o){var t=document.createElement("div");return t.innerHTML=o.trim(),t.firstChild},o}();var Validator=function(){function t(t,i){this.options={errorAlert:"There are errors, please check the form."},this.element=t,this.element&&(this.options.serializationFunction=function(){return $(this.element).serialize()}.bind(this),this.options=__assign(__assign({},this.options),i),this.element.addEventListener("submit",function(t){t.preventDefault(),t.stopImmediatePropagation(),this.submitForm();}.bind(this)));}return t.prototype.submitForm=function(){var t;if(this.element.classList.add("was-validated"),this.element.checkValidity()){this.element.classList.add("loading");var i=this.element.querySelector("input[type=checkbox]");i&&Array.prototype.slice.call(i).forEach((function(t){$(this).is(":checked")&&$(this).val("true");})),this.options.onSubmit&&this.options.onSubmit(this);var e=this.options.serializationFunction();$.post(this.element.action,e,function(t){this.options.onComplete&&this.options.onComplete(t,this);}.bind(this)).fail(null!==(t=this.options.onError)&&void 0!==t?t:Inline.handleError);}else this.options.errorAlert&&Alerts.error(this.options.errorAlert,null,5e3);},t}();var MediaService=function(){function e(e,t){this.options={action:"show",size:"large"},this.galleryInitialised=!1,this.selectedMedia=new Array,this.element=e,this.element&&(this.options=__assign(__assign({},this.options),t),$("body").off("click",".media-delete",this.delete.bind(this)),$("body").on("click",".media-delete",this.delete.bind(this)),$(this.element).on("click",".media-item",this.action.bind(this)),$(this.element).on("click",".media-create-directory",this.createDirectory.bind(this)),$(this.element).on("click",".media-delete-directory",this.deleteDirectory.bind(this)),this.media=new DataList(this.element,{onLoad:this.options.onListLoad,onError:this.options.onError,onRender:this.options.onListRender,onComplete:function(e,t){this.initUploader(),"gallery"!=this.options.action||this.galleryInitialised||($("#media-select-modal .modal-footer").removeClass("d-none"),$("#media-select-modal .modal-footer").on("click",this.galleryAdd.bind(this)),this.galleryInitialised=!0),this.options.onListComplete&&this.options.onListComplete(e,t);}.bind(this)}));}return e.prototype.initUploader=function(){if(this.uploadButton=document.getElementById("media-add"),this.uploader=document.getElementById("media-upload"),this.uploadButton&&this.uploader){this.progressArea=document.getElementById("media-progress"),this.progressText=$('<div class="progress-text text-muted mb-3"><i class="fa fa-info-circle me-2"></i>Uploading file <span></span>...</div>'),this.progress=$('<div class="progress"><div class= "progress-bar progress-bar-striped" role="progressbar" style="width:0%" aria-valuenow="10" aria-valuemin="0" aria-valuemax="100" ></div></div>'),this.progressText.appendTo(this.progressArea),this.progress.appendTo(this.progressArea);var e=null;$("#media-upload").dropzone({url:$("#media-upload").data("url")+"?directoryId="+$("#media-list > #upload-directory-id").val(),thumbnailWidth:80,thumbnailHeight:80,parallelUploads:5,paramName:"files",acceptedFiles:$("#media-upload").data("types")||".png,.jpg,.jpeg,.gif",autoProcessQueue:!0,previewsContainer:!1,clickable:"#media-add",dictDefaultMessage:'<span><i class="fa fa-cloud-upload fa-4x"></i><br />Drag and drop files here, or simply click me!</div>',dictResponseError:"Error while uploading file!",init:function(){e=this;}}),e.on("success",function(e,t){Response.process(t);}.bind(this)),e.on("addedfile",function(e){this.progress.find(".progress-bar").css({width:"0%"}),this.progressText.find("span").html("0%");}.bind(this)),e.on("totaluploadprogress",function(e,t,i){this.progress.find(".progress-bar").css({width:e+"%"}),this.progressText.find("span").html(Math.round(e)+"% - "+i.formatKilobytes()+" / "+t.formatKilobytes());}.bind(this)),e.on("sending",function(e){this.progressArea.classList.remove("collapse"),this.progress.find(".progress-bar").css({width:"0%"}),this.progressText.find("span").html("0%");}.bind(this)),e.on("complete",function(e){this.media.reload();}.bind(this)),e.on("queuecomplete",function(){this.progressArea.classList.add("collapse"),this.media.reload();}.bind(this));}},e.prototype.createDirectory=function(e){e.preventDefault(),e.stopPropagation();var t=new ModalController({onComplete:function(){var e=document.getElementById("content-directories-edit-form");new Validator(e,{onComplete:function(e){Response.process(e,5e3),e.success&&(this.media.reload(),t.close());}.bind(this)});}.bind(this)});t.show($(e.currentTarget).attr("href"),this.element);},e.prototype.deleteDirectory=function(e){e.preventDefault(),e.stopPropagation(),Alerts.confirm({},function(t){t.isConfirmed&&Inline.post(e.currentTarget.href,e.currentTarget,function(e,t){if(Response.process(t,5e3),t.data.length>0){var i=document.createElement("a");i.href=$(this.element).data("url"),i.search="?dir="+t.data[0],this.media.reload(new URL(i.href));}}.bind(this));}.bind(this));},e.prototype.uploadUrl=function(){return $("#media-upload").data("url")+"?directoryId="+$("#media-list > #upload-directory-id").val()},e.prototype.action=function(e){e.preventDefault(),e.stopPropagation();var t=$(e.currentTarget).data("json");switch(this.options.action){case"select":this.select(t,e);break;case"insert":this.insert(t,e);break;case"attach":this.attach(t,e);break;case"gallery":this.galleryClick(t,e);break;default:this.show(t,e);}},e.prototype.show=function(e,t){this.currentBlade=new ModalController,this.currentBlade.show($(t.target).data("blade"),t.target);},e.prototype.select=function(t,i){if(Alerts.log("[MediaService.select] Selecting media object id "+t.id+" - "+t.filename+" and inserting "+this.options.size+" url to target: "+this.options.target),this.options.target){var o=$(this.options.target);switch(this.options.size){case"thumb":o.val(t.thumbUrl);break;case"small":o.val(t.smallUrl);break;case"medium":o.val(t.mediumUrl);break;case"large":o.val(t.largeUrl);break;case"full":o.val(t.url);}}this.options.refresh&&e.refresh(t,this.options.refresh),this.options.onAction&&this.options.onAction(t);},e.prototype.insert=function(e,t){Alerts.log("[MediaService.insert] Selecting media object id "+e.id+" - "+e.filename+" and inserting "+this.options.size+" image to target editor: "+this.options.target),this.options.targetEditor.insertContent('<img alt="'+e.filename+'" src="'+e.url+'" class="img-fluid" />'),this.options.onAction&&this.options.onAction(e);},e.prototype.attach=function(t,i){Alerts.log("[MediaService.attach] Attaching media object id "+t.id+" - "+t.filename+" to url: "+this.options.url),$.post(this.options.url,{mediaId:t.id},function(i){Response.process(i,5e3),e.refresh(i.media,this.options.refresh),this.options.onAction&&this.options.onAction(t);}.bind(this));},e.prototype.galleryClick=function(e,t){this.isMediaSelected(e)?(Alerts.log("[MediaService.galleryClick] Removing media from selection - id "+e.id+" - "+e.filename+".}"),this.selectedMedia=this.selectedMedia.filter((function(t){return t.id!==e.id})),$(t.currentTarget).parents(".media-item").removeClass("active")):(Alerts.log("[MediaService.galleryClick] Adding to selected media objects - id "+e.id+" - "+e.filename+"."),this.selectedMedia.push(e),$(t.currentTarget).parents(".media-item").addClass("active"));},e.prototype.galleryAdd=function(e){e.preventDefault(),e.stopPropagation(),Alerts.log("[MediaService.galleryAdd] Adding "+this.selectedMedia.length+" selected media objects  to url: "+this.options.url);var t=this.selectedMedia.map((function(e){return e.id}));$.post(this.options.url,{media:t},function(e){Response.process(e),document.getElementById(this.options.target).hoodDataList.reload(),this.options.onAction&&this.options.onAction(e.media);}.bind(this));},e.prototype.isMediaSelected=function(e){var t=!1;return this.selectedMedia.forEach((function(i,o,s){i.id==e.id&&(t=!0);})),t},e.refresh=function(e,t){var i=e.icon;if("Image"===e.genericFileType&&(i=e.mediumUrl),t){var o=$(t);o.css({"background-image":"url("+i+")"}),o.find("img").attr("src",i),o.removeClass("loading");}},e.prototype.delete=function(e){e.preventDefault(),e.stopPropagation(),Alerts.confirm({html:"This file will be permanently deleted, are you sure?"},function(t){t.isConfirmed&&Inline.post(e.currentTarget.href,e.currentTarget,function(e){Response.process(e,5e3),this.media.reload(),this.currentBlade&&this.currentBlade.close();}.bind(this));}.bind(this));},e}();var MediaModal=function(){function e(){$("body").on("click","[data-hood-media=attach],[data-hood-media=select],[data-hood-media=gallery]",this.load.bind(this)),$("body").on("click","[data-hood-media=clear]",this.clear.bind(this)),$("[data-hood-media=gallery]").each(this.initGallery.bind(this));}return e.prototype.initGallery=function(e,t){var i=document.getElementById(t.dataset.hoodMediaTarget);i&&new DataList(i,{onComplete:function(e,t){Alerts.log("Finished loading gallery media list.","info");}.bind(this)});},e.prototype.load=function(e){e.preventDefault(),e.stopPropagation(),this.element=e.currentTarget,this.modal=new ModalController({onComplete:function(e){this.list=document.getElementById("media-list"),this.service=new MediaService(this.list,{action:this.element.dataset.hoodMedia,url:this.element.dataset.hoodMediaUrl,refresh:this.element.dataset.hoodMediaRefresh,target:this.element.dataset.hoodMediaTarget,size:this.element.dataset.hoodMediaSize,beforeAction:function(e,t){}.bind(this),onAction:function(e,t){this.modal.close();}.bind(this),onListLoad:function(e){},onListRender:function(e){return e},onListComplete:function(e){},onError:function(e,t,i){}});}.bind(this)}),this.modal.show($(e.currentTarget).data("hood-media-list"),e.currentTarget);},e.prototype.clear=function(e){e.preventDefault(),e.stopPropagation(),Alerts.confirm({},function(t){t.isConfirmed&&Inline.post(e.currentTarget.href,e.currentTarget,function(t){Response.process(t,5e3),MediaService.refresh(t.media,e.currentTarget.dataset.hoodMediaRefresh);}.bind(this));}.bind(this));},e}();var Uploader=function(){function e(){($(".image-uploader").length||$(".gallery-uploader").length)&&($(".upload-progress-bar").hide(),$(".image-uploader").each(this.singleImage),$(".gallery-uploader").each(this.gallery));}return e.prototype.refreshImage=function(e,r){$(e.data("preview")).css({"background-image":"url("+r.media.smallUrl+")"}),$(e.data("preview")).find("img").attr("src",r.media.smallUrl);},e.prototype.singleImage=function(){var e="#"+$(this).attr("id"),r=$(e),a="#"+$(this).attr("json"),l=null;r.dropzone({url:r.data("url"),maxFiles:1,paramName:"file",parallelUploads:1,acceptedFiles:r.data("types")||".png,.jpg,.jpeg,.gif",autoProcessQueue:!0,previewsContainer:!1,clickable:e,init:function(){l=this;}}),l.on("addedfile",(function(){})),l.on("totaluploadprogress",(function(r){$(".upload-progress-bar."+e.replace("#","")+" .progress-bar").css({width:r+"%"});})),l.on("sending",(function(a){$(".upload-progress-bar."+e.replace("#","")).show(),$(r.data("preview")).addClass("loading");})),l.on("queuecomplete",(function(r){$(".upload-progress-bar."+e.replace("#","")).hide();})),l.on("success",(function(e,o){o.success?(o.media&&($(a).val(JSON.stringify(o.media)),$(r.data("preview")).css({"background-image":"url("+o.media.smallUrl+")"}),$(r.data("preview")).find("img").attr("src",o.media.smallUrl)),Alerts.success("New image added!")):Alerts.error("There was a problem adding the image: "+o.error),l.removeFile(e),$(r.data("preview")).removeClass("loading");}));},e.prototype.gallery=function(){var e="#"+$(this).attr("id"),r=$(e),a=document.querySelector(e+"-template");a.id="";var l=a.parentNode.innerHTML;a.parentNode.removeChild(a);var o=null;r.dropzone({url:r.data("url"),thumbnailWidth:80,thumbnailHeight:80,parallelUploads:5,previewTemplate:l,paramName:"files",acceptedFiles:r.data("types")||".png,.jpg,.jpeg,.gif",autoProcessQueue:!0,previewsContainer:"#previews",clickable:".fileinput-button",init:function(){o=this;}}),$(e+" .cancel").hide(),o.on("addedfile",(function(r){$(r.previewElement.querySelector(".complete")).hide(),$(r.previewElement.querySelector(".cancel")).show(),$(e+" .cancel").show();})),o.on("totaluploadprogress",(function(e,r,a){document.querySelector("#total-progress .progress-bar").style.width=e+"%";})),o.on("sending",(function(e){document.querySelector("#total-progress").style.opacity="1";})),o.on("complete",(function(e){$(e.previewElement.querySelector(".cancel")).hide(),$(e.previewElement.querySelector(".progress")).hide(),$(e.previewElement.querySelector(".complete")).show(),console.error("Uploader.Gallery.Dropzone.OnComplete - Inline.Refresh('.gallery') is not implemented.");})),o.on("queuecomplete",(function(r){document.querySelector("#total-progress").style.opacity="0",$(e+" .cancel").hide();})),o.on("success",(function(e,r){console.error("Uploader.Gallery.Dropzone.OnSuccess - Inline.Refresh('.gallery') is not implemented."),r.success?Alerts.success("New images added!"):Alerts.error("There was a problem adding the profile image: "+r.error);})),$(".actions .cancel").click((function(){o.removeAllFiles(!0);}));},e}();var BaseController=function(){function o(){this.uploader=new Uploader,this.handlers=new Handlers,this.setupLoaders(),this.mediaModal=new MediaModal;}return o.prototype.setupLoaders=function(){$("body").on("loader-show",(function(){Alerts.success("Showing loader...");})),$("body").on("loader-hide",(function(){Alerts.error("Hiding loader...");}));},o}();var HomeController=function(){function t(){if($("#admin-chart-area").length){var t=this;t.LoadChart(),$("body").on("change","#history",(function(){t.LoadChart();}));}}return t.prototype.LoadChart=function(){var t=this;$.get("/admin/stats/",(function(o){$("#admin-chart-area").empty(),$("#admin-chart-area").html('<canvas id="admin-stats-chart"></canvas>'),t.LoadStats(o),t.DrawChart(o);}));},t.prototype.DrawChart=function(t){var o,e=[],a="#fabd07",r="#20c997",n="#fd7e14",s=[],i=[];t.content.months.forEach((function(t){i.push(t.value),s.push(t.key);})),e.push({label:"New Content",data:i,borderColor:a,backgroundColor:a,pointBackgroundColor:a,pointBorderColor:"#ffffff"}),i=[],t.users.months.forEach((function(t){i.push(t.value);})),e.push({label:"New Users",data:i,borderColor:n,backgroundColor:n,pointBackgroundColor:n,pointBorderColor:"#ffffff"}),i=[],t.properties.months.forEach((function(t){i.push(t.value);})),e.push({label:"New Properties",data:i,borderColor:r,backgroundColor:r,pointBackgroundColor:r,pointBorderColor:"#ffffff"}),o=s,this.canvas=document.getElementById("admin-stats-chart"),this.ctx=this.canvas.getContext("2d"),this.chart=new chart_js.Chart(this.ctx,{type:"bar",data:{labels:o,datasets:e},options:{responsive:!0,maintainAspectRatio:!1,scales:{y:{beginAtZero:!0}}}});},t.prototype.LoadStats=function(t){if(t.content&&($(".content-totalPosts").text(t.content.totalPosts),$(".content-totalPublished").text(t.content.totalPublished),t.content.byType))for(var o=0;o<t.content.byType.length;o++)$(".content-"+t.content.byType[o].name+"-total").text(t.content.byType[o].total);t.users&&($(".users-totalUsers").text(t.users.totalUsers),$(".users-totalAdmins").text(t.users.totalAdmins)),t.properties&&($(".properties-totalPosts").text(t.properties.totalProperties),$(".properties-totalPublished").text(t.properties.totalPublished));},t}();var MediaController=function(){function i(){this.manage();}return i.prototype.manage=function(){this.list=document.getElementById("media-list"),this.service=new MediaService(this.list,{action:"show",onAction:function(i){Alerts.log("Showing media object id "+i.id+" - "+i.filename);}.bind(this),onListLoad:function(){Alerts.log("Commencing media list fetch.");},onError:function(i,e,t){Alerts.log("Error loading media list: "+e);},onListRender:function(i){return Alerts.log("Fetched media list data."),i},onListComplete:function(){Alerts.log("Finished loading media list...","info");}});},i}();var ContentController=function(){function t(){this.manage(),$("body").on("click",".content-create",this.create.bind(this)),$("body").on("click",".content-delete",this.delete.bind(this)),$("body").on("click",".content-set-status",this.setStatus.bind(this)),$("body").on("click",".content-categories-delete",this.deleteCategory.bind(this)),$("body").on("click",".content-categories-create,.content-categories-edit",this.createOrEditCategory.bind(this)),$("body").on("change",".content-categories-check",this.toggleCategory.bind(this)),$("body").on("click",".content-media-delete",this.removeMedia.bind(this)),$("body").on("keyup","#Slug",(function(){var t=$(this).val();$(".slug-display").html(t);}));}return t.prototype.manage=function(){this.element=document.getElementById("content-list"),this.element&&(this.list=new DataList(this.element,{onComplete:function(t,e){Alerts.log("Finished loading content list.","info");}.bind(this)})),this.categoryElement=document.getElementById("content-categories-list"),this.categoryElement&&(this.categoryList=new DataList(this.categoryElement,{onComplete:function(t,e){Alerts.log("Finished loading category list.","info");}.bind(this)}));},t.prototype.create=function(t){t.preventDefault(),t.stopPropagation();var e=new ModalController({onComplete:function(){var t=document.getElementById("content-create-form");new Validator(t,{onComplete:function(t){Response.process(t,5e3),this.list&&this.list.reload(),t.success&&e.close();}.bind(this)});}.bind(this)});e.show($(t.currentTarget).attr("href"),this.element);},t.prototype.delete=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The content will be permanently removed."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(e){Response.process(e,5e3),this.list&&this.list.reload(),t.currentTarget.dataset.redirect&&(Alerts.message("Just taking you back to the content list.","Redirecting..."),setTimeout((function(){window.location=t.currentTarget.dataset.redirect;}),1500));}.bind(this));}.bind(this));},t.prototype.setStatus=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The change will happen immediately."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(t){Response.process(t,5e3),this.list&&this.list.reload();}.bind(this));}.bind(this));},t.prototype.clone=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"This will duplicate the content and everything inside it."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(t){Response.process(t,5e3),this.list&&this.list.reload();}.bind(this));}.bind(this));},t.prototype.createOrEditCategory=function(t){t.preventDefault(),t.stopPropagation();var e=new ModalController({onComplete:function(){var t=document.getElementById("content-categories-edit-form");new Validator(t,{onComplete:function(t){Response.process(t,5e3),this.list&&this.list.reload(),t.success&&(this.categoryList.reload(),e.close());}.bind(this)});}.bind(this)});e.show($(t.currentTarget).attr("href"),this.element);},t.prototype.deleteCategory=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(t){Response.process(t,5e3),this.categoryList.reload();}.bind(this));}.bind(this));},t.prototype.toggleCategory=function(t){t.preventDefault(),t.stopPropagation(),$.post($(t.currentTarget).data("url"),{categoryId:$(t.currentTarget).val(),add:$(t.currentTarget).is(":checked")},function(t){Response.process(t,5e3),this.categoryList&&this.categoryList.reload();}.bind(this));},t.prototype.removeMedia=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The media will be removed from the property, but will still be in the media collection."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(t){Response.process(t,5e3);var e=document.getElementById("content-gallery-list");e.hoodDataList&&e.hoodDataList.reload();}.bind(this));}.bind(this));},t}();var PropertyController=function(){function t(){this.manage(),$("body").on("click",".property-create",this.create.bind(this)),$("body").on("click",".property-delete",this.delete.bind(this)),$("body").on("click",".property-set-status",this.setStatus.bind(this)),$("body").on("click",".property-media-delete",this.removeMedia.bind(this)),$("body").on("click",".property-floorplan-delete",this.removeMedia.bind(this)),$("body").on("keyup","#Slug",(function(){var t=$(this).val();$(".slug-display").html(t);}));}return t.prototype.manage=function(){this.element=document.getElementById("property-list"),this.element&&(this.list=new DataList(this.element,{onComplete:function(t,e){Alerts.log("Finished loading property list.","info");}.bind(this)}));},t.prototype.create=function(t){t.preventDefault(),t.stopPropagation();var e=new ModalController({onComplete:function(){var t=document.getElementById("property-create-form");new Validator(t,{onComplete:function(t){Response.process(t,5e3),this.list&&this.list.reload(),t.success&&e.close();}.bind(this)});}.bind(this)});e.show($(t.currentTarget).attr("href"),this.element);},t.prototype.delete=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The property will be permanently removed."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(e){Response.process(e,5e3),this.list&&this.list.reload(),t.currentTarget.dataset.redirect&&(Alerts.message("Just taking you back to the property list.","Redirecting..."),setTimeout((function(){window.location=t.currentTarget.dataset.redirect;}),1500));}.bind(this));}.bind(this));},t.prototype.setStatus=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The change will happen immediately."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(t){Response.process(t,5e3),this.list&&this.list.reload();}.bind(this));}.bind(this));},t.prototype.removeMedia=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The media will be removed from the property, but will still be in the media collection."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(t){Response.process(t,5e3);var e=document.getElementById("property-gallery-list");e.hoodDataList&&e.hoodDataList.reload();var o=document.getElementById("property-floorplan-list");o&&o.hoodDataList&&o.hoodDataList.reload();}.bind(this));}.bind(this));},t}();var RandomStringGenerator=function(){function t(t){this.options={specials:"!@#$&*",alpha:"abcdefghijklmnopqrstuvwxyz",numeric:"0123456789",numSpecial:2},this.options=__assign(__assign({},this.options),t);}return t.prototype.generate=function(t){for(var o="",n=Math.ceil((t-this.options.numSpecial)/2),i=0;i<n;i++)o+=this.options.alpha.charAt(Math.floor(Math.random()*this.options.alpha.length)),o+=this.options.numeric.charAt(Math.floor(Math.random()*this.options.numeric.length));for(var a=0;a<this.options.numSpecial;a++)o+=this.options.specials.charAt(Math.floor(Math.random()*this.options.specials.length));return o=o.split("").sort((function(){return .5-Math.random()})).join("")},t}();var UsersController=function(){function e(){this.initLists(),$("body").on("click",".user-create",this.create.bind(this)),$("body").on("click",".user-delete",this.delete.bind(this)),$("body").on("change","#user-create-form #GeneratePassword",this.generatePassword),$("body").on("change",".user-role-check",this.toggleUserRole),$("body").on("click",".user-reset-password",this.resetPassword),$("body").on("click",".user-notes-add",this.addNote.bind(this)),$("body").on("click",".user-notes-delete",this.deleteNote.bind(this));}return e.prototype.initLists=function(){this.element=document.getElementById("user-list"),this.element&&(this.list=new DataList(this.element,{onComplete:function(e,t){Alerts.log("Finished loading users list.","info");}.bind(this)})),this.notesEl=document.getElementById("user-notes"),this.notesEl&&(this.notesList=new DataList(this.notesEl,{onComplete:function(e,t){Alerts.log("Finished loading user notes list.","info");}.bind(this)}));},e.prototype.create=function(e){e.preventDefault(),e.stopPropagation();var t=new ModalController({onComplete:function(){var e=document.getElementById("user-create-form");new Validator(e,{onComplete:function(e){Response.process(e,5e3),this.list&&this.list.reload(),e.success&&t.close();}.bind(this)});}.bind(this)});t.show($(e.currentTarget).attr("href"),this.element);},e.prototype.delete=function(e){e.preventDefault(),e.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The user will be permanently removed."},function(t){t.isConfirmed&&Inline.post(e.currentTarget.href,e.currentTarget,function(t){Response.process(t,5e3),this.list&&this.list.reload(),e.currentTarget.dataset.redirect&&(Alerts.message("Just taking you back to the content list.","Redirecting..."),setTimeout((function(){window.location=e.currentTarget.dataset.redirect;}),1500));}.bind(this));}.bind(this));},e.prototype.generatePassword=function(){if($(this).is(":checked")){var e=new RandomStringGenerator({numSpecial:1});$("#user-create-form #Password").val(e.generate(8)),$("#user-create-form #Password").attr("type","text");}else $("#user-create-form #Password").val(""),$("#user-create-form #Password").attr("type","password");},e.prototype.toggleUserRole=function(){$(this).is(":checked")?$.post($(this).data("url"),{role:$(this).val(),add:!0},(function(e){Response.process(e);})):$.post($(this).data("url"),{role:$(this).val(),add:!1},(function(e){Response.process(e);}));},e.prototype.resetPassword=function(e){e.preventDefault(),e.stopPropagation(),Alerts.prompt({title:"Reset Password",html:"Please enter a new password for the user...",preConfirm:function(e){return !1!==e&&(""===e?(swal__default['default'].showValidationMessage("You didn't supply a new password, we can't reset the password without it!"),!1):void 0)}},function(t){if(t.isDismissed)return !1;$.post(e.currentTarget.href,{password:t.value},(function(e){Response.process(e,5e3);}));}.bind(this));},e.prototype.addNote=function(e){e.preventDefault(),e.stopPropagation(),Alerts.prompt({title:"Add a note",html:"Enter and store a note about this user.",input:"textarea",preConfirm:function(e){return !1!==e&&(""===e?(swal__default['default'].showValidationMessage("You didn't enter a note!"),!1):void 0)}},function(t){if(t.isDismissed)return !1;$.post(e.currentTarget.href,{note:t.value},function(e){Response.process(e,5e3),this.notesList&&this.notesList.reload();}.bind(this));}.bind(this));},e.prototype.deleteNote=function(e){e.preventDefault(),e.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The note will be permanently removed."},function(t){t.isConfirmed&&Inline.post(e.currentTarget.href,e.currentTarget,function(e){Response.process(e,5e3),this.notesList&&this.notesList.reload();}.bind(this));}.bind(this));},e}();var ThemesController=function(){function e(){$("body").on("click",".activate-theme",this.activate.bind(this)),this.element=document.getElementById("themes-list"),this.element&&(this.list=new DataList(this.element,{onComplete:function(e,t){Alerts.log("Finished loading users list.","info");}.bind(this)}));}return e.prototype.activate=function(e){e.preventDefault(),e.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The site will change themes, and the selected theme will be live right away."},function(t){t.isConfirmed&&Inline.post(e.currentTarget.href,e.currentTarget,function(e){Response.process(e,5e3),setTimeout(function(){this.list&&this.list.reload();}.bind(this),2e3);}.bind(this));}.bind(this));},e}();var ContentTypeController=function(){function t(){this.manage(),$("body").on("click",".content-type-create",this.create.bind(this)),$("body").on("click",".content-type-delete",this.delete.bind(this)),$("body").on("click",".content-type-set-status",this.setStatus.bind(this)),$("body").on("click",".content-custom-field-create",this.createField.bind(this)),$("body").on("click",".content-custom-field-delete",this.deleteField.bind(this)),$("body").on("keyup","#Slug",(function(){var t=$(this).val();$(".slug-display").html(t);}));}return t.prototype.manage=function(){this.element=document.getElementById("content-type-list"),this.element&&(this.list=new DataList(this.element,{onComplete:function(t,e){Alerts.log("Finished loading content type list.","info");}.bind(this)})),this.fieldsElement=document.getElementById("content-custom-field-list"),this.fieldsElement&&(this.fieldsList=new DataList(this.fieldsElement,{onComplete:function(t,e){Alerts.log("Finished loading content type list.","info");}.bind(this)}));},t.prototype.create=function(t){t.preventDefault(),t.stopPropagation();var e=new ModalController({onComplete:function(){var t=document.getElementById("content-type-create-form");new Validator(t,{onComplete:function(t){Response.process(t,5e3),this.list&&this.list.reload(),t.success&&e.close();}.bind(this)});}.bind(this)});e.show($(t.currentTarget).attr("href"),this.element);},t.prototype.delete=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The content type will be permanently removed. Content will remain, but will be unusable and marked as the old content type."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(e){Response.process(e,5e3),this.list&&this.list.reload(),t.currentTarget.dataset.redirect&&(Alerts.message("Just taking you back to the content list.","Redirecting..."),setTimeout((function(){window.location=t.currentTarget.dataset.redirect;}),1500));}.bind(this));}.bind(this));},t.prototype.setStatus=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The change will happen immediately."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(t){Response.process(t,5e3),this.list&&this.list.reload();}.bind(this));}.bind(this));},t.prototype.createField=function(t){t.preventDefault(),t.stopPropagation();var e=new ModalController({onComplete:function(){var t=document.getElementById("content-custom-field-create-form");new Validator(t,{onComplete:function(t){Response.process(t,5e3),this.fieldsList&&this.fieldsList.reload(),t.success&&e.close();}.bind(this)});}.bind(this)});e.show($(t.currentTarget).attr("href"),this.element);},t.prototype.deleteField=function(t){t.preventDefault(),t.stopPropagation(),Alerts.confirm({title:"Are you sure?",html:"The field will be permanently removed. However fields will still be attached to content."},function(e){e.isConfirmed&&Inline.post(t.currentTarget.href,t.currentTarget,function(t){Response.process(t,5e3),this.fieldsList&&this.fieldsList.reload();}.bind(this));}.bind(this));},t}();var LogsController=function(){this.element=document.getElementById("log-list"),this.element&&(this.list=new DataList(this.element,{onComplete:function(t,e){Alerts.log("Finished loading logs list.","info");}.bind(this)}));};var PropertyImporter=function(){function r(){$("#import-property-start").length>0&&(this.update(),$("#import-property-start").click(function(){$.ajax({url:$("#import-property-start").data("url"),type:"POST",error:Inline.handleError,success:function(){this.update();}.bind(this)});}.bind(this)),$("#import-property-cancel").click(function(){$.ajax({url:$("#import-property-cancel").data("url"),type:"POST",error:Inline.handleError,success:function(){this.update();}.bind(this)});}.bind(this)));}return r.prototype.update=function(){$.ajax({url:$("#import-property-status").data("url"),type:"POST",error:Inline.handleError,success:function(r){r.importer.running?(this.showInfo(),clearInterval(this.updateInterval),this.updateInterval=setTimeout(this.update,250)):(clearInterval(this.updateInterval),this.hideInfo()),$(".tp").html(r.importer.total.toString()),$("#pu").html(r.importer.updated.toString()),$("#pa").html(r.importer.added.toString()),$("#pp").html(r.importer.processed.toString()),$("#pd").html(r.importer.deleted.toString()),$("#ToAdd").html(r.importer.toAdd.toString()),$("#ToUpdate").html(r.importer.toUpdate.toString()),$("#ToDelete").html(r.importer.toDelete.toString()),$("#pt").html(r.importer.statusMessage.toString());var t=Math.round(100*r.ftp.complete)/100;$("#fp").html(t.toString()),$("#ft").html(r.ftp.statusMessage);var e=Math.round(100*r.importer.complete)/100;if($(".pc").html(e.toString()),$("#progressbar").css({width:r.importer.complete+"%"}),r.importer.errors.length){for(var o="",p=r.importer.errors.length-1;p>=0;p--)o+='<div class="text-danger">'+r.importer.errors[p]+"</div>";$("#import-property-errors").html(o);}else $("#import-property-errors").html("<div>No errors reported.</div>");if(r.importer.warnings.length){for(var i="",n=r.importer.warnings.length-1;n>=0;n--)i+='<div class="text-warning">'+r.importer.warnings[n]+"</div>";$("#import-property-warnings").html(i);}else $("#import-property-warnings").html("<div>No warnings reported.</div>");}.bind(this)});},r.prototype.hideInfo=function(){$("#import-property-start").removeAttr("disabled"),$("#import-property-cancel").attr("disabled","disabled"),$("#import-property-progress").removeClass("d-block"),$("#import-property-progress").addClass("d-none");},r.prototype.showInfo=function(){$("#import-property-cancel").removeAttr("disabled"),$("#import-property-start").attr("disabled","disabled"),$("#import-property-progress").addClass("d-block"),$("#import-property-progress").removeClass("d-none");},r}();var Editors=function(){function i(i){this.options={linkClasses:[{title:"None",value:""},{title:"Button link",value:"btn btn-default"},{title:"Theme coloured button link",value:"btn btn-primary"},{title:"Popup image/video",value:"colorbox-iframe"},{title:"Button popup link",value:"btn btn-default colorbox-iframe"},{title:"Theme coloured button popup link",value:"btn btn-primary colorbox-iframe"},{title:"Large link",value:"font-lg"},{title:"Large button link",value:"btn btn-default btn-lg"},{title:"Large theme coloured button link",value:"btn btn-primary btn-lg"},{title:"Large popup image/video",value:"font-lg colorbox-iframe"},{title:"Large Button popup link",value:"btn btn-default btn-lg colorbox-iframe"},{title:"Theme coloured button popup link",value:"btn btn-primary btn-lg colorbox-iframe"}],imageClasses:[{title:"None",value:""},{title:"Full Width",value:"user-image full"},{title:"Left Aligned",value:"user-image left"},{title:"Centered",value:"user-image center"},{title:"Right Aligned",value:"user-image right"},{title:"Inline with text, top aligned",value:"user-image inline top"},{title:"Inline with text, middle aligned",value:"user-image inline"},{title:"Inline with text, bottom aligned",value:"user-image inline bottom"},{title:"Pulled Left",value:"user-image pull-left"},{title:"Pulled Right",value:"user-image pull-right"}]},this.options=__assign(__assign({},this.options),i),this.richTextEditors();}return i.prototype.richTextEditors=function(){tinymce__default['default'].init({selector:".tinymce-full",height:150,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor media","searchreplace visualblocks code fullscreen","insertdatetime media contextmenu paste code"],toolbar:"styleselect | bold italic | alignleft aligncenter alignright | bullist numlist | link image media hoodimage | code",link_class_list:this.options.linkClasses,image_class_list:this.options.imageClasses,setup:this.setupCommands.bind(this),image_dimensions:!1,content_css:["/dist/css/editor.css"]}),tinymce__default['default'].init({selector:".tinymce-simple",height:150,plugins:["advlist autolink lists link image charmap print preview anchor media","searchreplace visualblocks code fullscreen","insertdatetime media contextmenu paste code"],menubar:!1,toolbar:"bold italic | bullist numlist | undo redo | link",link_class_list:this.options.linkClasses,image_class_list:this.options.imageClasses,setup:this.setupCommands.bind(this),image_dimensions:!1}),tinymce__default['default'].init({selector:".tinymce-full-content",height:500,menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor media","searchreplace visualblocks code fullscreen","insertdatetime media contextmenu paste code"],toolbar:"styleselect | bold italic | alignleft aligncenter alignright | bullist numlist | link image media hoodimage | code",link_class_list:this.options.linkClasses,image_class_list:this.options.imageClasses,setup:this.setupCommands.bind(this),image_dimensions:!1}),tinymce__default['default'].init({selector:".tinymce-simple-content",height:500,plugins:["advlist autolink lists link image charmap print preview anchor media","searchreplace visualblocks code fullscreen","insertdatetime media contextmenu paste code"],menubar:!1,toolbar:"bold italic | bullist numlist | undo redo | link",link_class_list:this.options.linkClasses,image_class_list:this.options.imageClasses,image_dimensions:!1});},i.prototype.setupCommands=function(i){this.currentEditor=$("#"+i.id),this.currentEditor.data("hoodMediaList")&&i.addButton("hoodimage",{text:"Insert image...",icon:!1,onclick:function(t){this.mediaModal=new ModalController({onComplete:function(t){this.list=document.getElementById("media-list"),this.service=new MediaService(this.list,{action:"insert",url:this.currentEditor.data("hoodMediaList"),targetEditor:i,size:this.currentEditor.data("hoodMediaSize"),beforeAction:function(i,t){}.bind(this),onAction:function(i,t){this.mediaModal.close();}.bind(this),onListLoad:function(i){},onListRender:function(i){return i},onListComplete:function(i){},onError:function(i,t,e){}});}.bind(this)}),this.mediaModal.show(this.currentEditor.data("hoodMediaList"),t.currentTarget);}.bind(this)});},i}();var ColorPickers=function(t){void 0===t&&(t=".color-picker");var o=function(t,o,r){var n=$(r._root.button).parent().data("target");$(r._root.button).parent().css({"background-color":t.toHEXA().toString()});for(var a=r.getColor().toHEXA(),e="",i=a.length-1;i>=0;i--)e=a[i]+e;$(n).val("#"+e),$(n).change();};$(t).each((function(t,n){var a=!0;"true"==$(this).data("opacity")&&(a=!1);Pickr__default['default'].create({el:n.children[0],appClass:"custom-class",theme:"monolith",useAsButton:!0,default:$(this).data("default")||"none",lockOpacity:a,defaultRepresentation:"HEXA",position:"bottom-end",components:{opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsva:!1,input:!0,clear:!0}}}).on("init",(function(t){var r=$(t._root.button).parent().data("target"),n=$(r).val();$(t._root.button).on("click",$.proxy((function(){this.show();}),t)),$(r).on("click",$.proxy((function(){this.show();}),t)),n&&(t.setColor(n),o(t.getColor(),0,t));})).on("clear",(function(t){var r=$(t._root.button).parent().data("target");t.setColor("transparent"),o(t.getColor(),0,t),$(r).val(""),$(r).change();})).on("change",o);}));};var Admin=function(r){function o(){var o=r.call(this)||this;return o.handlers.initDefaultHandlers(),o.home=new HomeController,o.media=new MediaController,o.content=new ContentController,o.contentType=new ContentTypeController,o.logs=new LogsController,o.property=new PropertyController,o.propertyImporter=new PropertyImporter,o.themes=new ThemesController,o.users=new UsersController,new Editors,new ColorPickers,$("#page-tabs").length>0&&o.checkAndLoadTabs("#page-tabs"),$(".restrict-to-slug").restrictToSlug(),$(".restrict-to-page-slug").restrictToPageSlug(),$(".restrict-to-meta-slug").restrictToMetaSlug(),$(".character-counter").characterCounter(),$(".character-counter").trigger("change"),$(".warning-alert").warningAlert(),$(".mobile-sidebar-toggle").on("click",(function(){$("nav.sidebar").toggleClass("open");})),$(".right-sidebar-toggle").on("click",(function(){$("#right-sidebar").toggleClass("sidebar-open");})),$(".alert.auto-dismiss").fadeTo(5e3,500).slideUp(500,(function(){$(".alert.auto-dismiss").slideUp(500);})),$(".sidebar-scroll").slimScroll({height:"100%",railOpacity:.4,wheelStep:10}),o}return __extends(o,r),o.prototype.checkAndLoadTabs=function(r){$(r+' a[data-bs-toggle="tab"]').on("shown.bs.tab",(function(o){var e=JSON.parse(localStorage.getItem("tabs-"+r))||{};e["tab-"+$(r).data("hoodTabs")]=$(o.target).attr("href"),localStorage.setItem("tabs-"+r,JSON.stringify(e));}));var o=(JSON.parse(localStorage.getItem("tabs-"+r))||{})["tab-"+$(r).data("hoodTabs")],e=$(r+' a[data-bs-toggle="tab"]')[0];o&&(e=document.querySelector(r+' a[href="'+o+'"]')),new bootstrap__namespace.Tab(e).show();},o}(BaseController);var app=new Admin;exports.Alerts=Alerts;exports.app=app;Object.defineProperty(exports,'__esModule',{value:true});return exports;}({},Swal,bootstrap,Chart,tinymce,Pickr));