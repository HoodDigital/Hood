@inject IThemesService _themes
<environment names="Development,Staging,ErrorTesting">
    <link rel="stylesheet" href="~/css/preload.css" asp-append-version="true" />
</environment>
<environment names="Production,PreProduction">
    <link rel="stylesheet" href="~/css/preload.min.css" asp-append-version="true" />
</environment>

<!--[if lte IE 9]>
    @{ await Html.RenderPartialAsync("_DeferredStyles"); }
<![endif]-->
<!--[if gt IE 9]><!-->
    <noscript id="deferred-styles">
        @{ await Html.RenderPartialAsync("_DeferredStyles"); }
    </noscript>
<!--<![endif]-->
<!--[if gt IE 9]><!-->
    <script>
        var loadDeferredStyles = function () {
            var addStylesNode = document.getElementById("deferred-styles");
            var replacement = document.createElement("div");
            replacement.innerHTML = addStylesNode.textContent;
            document.body.appendChild(replacement)
            addStylesNode.parentElement.removeChild(addStylesNode);
        };
        var raf = requestAnimationFrame || mozRequestAnimationFrame ||
            webkitRequestAnimationFrame || msRequestAnimationFrame;
        if (raf) raf(function () { window.setTimeout(loadDeferredStyles, 0); });
        else window.addEventListener('load', loadDeferredStyles);
    </script>
<!--<![endif]-->
