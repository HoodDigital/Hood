"use strict";$.hood||($.hood={}),$.hood.Handlers={Init:function(){$("body").on("click",".select-text",$.hood.Handlers.SelectTextContent),$("body").on("click",".btn.click-select[data-target][data-value]",$.hood.Handlers.ClickSelect),$("body").on("click",".click-select.show-selected[data-target][data-value]",$.hood.Handlers.ClickSelect),$("body").on("click",".click-select:not(.show-selected)[data-target][data-value]",$.hood.Handlers.ClickSelectClean),$("body").on("click",".slide-link",$.hood.Handlers.SlideToAnchor),$("body").on("click",".scroll-target, .scroll-to-target",$.hood.Handlers.ScrollToTarget),$("body").on("click",".scroll-top, .scroll-to-top",$.hood.Handlers.ScrollToTop),$("body").on("change","input[type=checkbox][data-input]",$.hood.Handlers.CheckboxChange),$("body").on("change",".submit-on-change",$.hood.Handlers.SubmitOnChange),$("select[data-selected]").each($.hood.Handlers.SelectSetup),$("body").on("change",".inline-date",$.hood.Handlers.DateChange),$.hood.Handlers.Uploaders.Init(),$.hood.Handlers.ColorPickers()},ScrollToTop:function(e){return e&&e.preventDefault(),$("html, body").animate({scrollTop:0},800),!1},ScrollToTarget:function(e){e&&e.preventDefault();var t=$(this).attr("href").split("#")[0];if(t===window.location.pathname||""===t){var a=this.hash,o=$(a),r=$("header.header"),l=0;r&&(l=r.height()),$(this).data("offset")?$("html, body").stop().animate({scrollTop:o.offset().top-$(this).data("offset")},900,"swing"):$("html, body").stop().animate({scrollTop:o.offset().top-l},900,"swing")}},SubmitOnChange:function(e){e&&e.preventDefault(),$(this).parents("form").submit()},DateChange:function(e){e&&e.preventDefault();var t=$(this).parents(".hood-date").find(".date-output"),a=t.parents(".hood-date").find(".date-value").val(),o=/^([0-9]{2})\/([0-9]{2})\/([0-9]{4})$/;o.test(a)||(a="01/01/2001");var r=t.parents(".hood-date").find(".hour-value").val();$.isNumeric(r)||(r="00");var l=t.parents(".hood-date").find(".minute-value").val();$.isNumeric(l)||(l="00"),t.val(a+" "+r+":"+l+":00"),t.attr("value",a+" "+r+":"+l+":00")},CheckboxChange:function(e){e&&e.preventDefault();var t=new Array;$('input[data-input="'+$(this).data("input")+'"]').each(function(){$(this).is(":checked")&&t.push($(this).val())});var a="#"+$(this).data("input"),o=JSON.stringify(t);$(a).val(o)},SelectSetup:function(){$(this).data("selected");if("undefined"!==$(this).data("selected")&&""!==$(this).data("selected")){var e=String($(this).data("selected"));$(this).val(e)}},ClickSelect:function(){var e=$(this),t="#"+e.data("target");$(t).val(e.data("value")),$(t).trigger("change"),$('.click-select[data-target="'+e.data("target")+'"]').each(function(){$(this).html($(this).data("temp")).removeClass("active")}),$('.click-select[data-target="'+e.data("target")+'"][data-value="'+e.data("value")+'"]').each(function(){$(this).data("temp",$(this).html()).html("Selected").addClass("active")})},ClickSelectClean:function(){var e=$(this),t="#"+e.data("target");$(t).val(e.data("value")),$(t).trigger("change"),$('.click-select.clean[data-target="'+e.data("target")+'"]').each(function(){$(this).removeClass("active")}),$('.click-select.clean[data-target="'+e.data("target")+'"][data-value="'+e.data("value")+'"]').each(function(){$(this).addClass("active")})},SelectTextContent:function(){var e=$(this);e.select(),e.mouseup(function(){return e.unbind("mouseup"),!1})},SlideToAnchor:function(){var e=$("body").scrollTop(),t=$($.attr(this,"href")).offset().top;return $("html, body").animate({scrollTop:t},Math.abs(t-e)),!1},Uploaders:{Init:function(){($(".image-uploader").length||$(".gallery-uploader").length)&&($(".upload-progress-bar").hide(),$.getScript("/lib/dropzone/min/dropzone.min.js",$.proxy(function(){$(".image-uploader").each(function(){$.hood.Handlers.Uploaders.SingleImage($(this).attr("id"),$(this).data("json"))}),$(".gallery-uploader").each(function(){$.hood.Handlers.Uploaders.Gallery($(this).attr("id"),$(this).data("json"))})},this)))},RefreshImage:function(e,t){$(e.data("preview")).css({"background-image":"url("+t.Media.SmallUrl+")"}),$(e.data("preview")).find("img").attr("src",t.Media.SmallUrl)},SingleImage:function(e,t){e="#"+e;$(e);Dropzone.autoDiscover=!1;var a=new Dropzone(e,{url:$(e).data("url"),maxFiles:1,paramName:"file",parallelUploads:1,acceptedFiles:$(e).data("types")||".png,.jpg,.jpeg,.gif",autoProcessQueue:!0,previewsContainer:!1,clickable:e});a.on("addedfile",function(){}),a.on("totaluploadprogress",function(t){$(".upload-progress-bar."+e.replace("#","")+" .progress-bar").css({width:t+"%"})}),a.on("sending",function(t){$(".upload-progress-bar."+e.replace("#","")).show(),$($(e).data("preview")).addClass("loading")}),a.on("queuecomplete",function(t){$(".upload-progress-bar."+e.replace("#","")).hide()}),a.on("success",function(o,r){r.Success?(r.Media&&($(t).val(JSON.stringify(r.Media)),$($(e).data("preview")).css({"background-image":"url("+r.Media.SmallUrl+")"}),$($(e).data("preview")).find("img").attr("src",r.Media.SmallUrl)),$.hood.Alerts.Success("New image added!")):$.hood.Alerts.Error("There was a problem adding the image: "+r.Error),a.removeFile(o),$($(e).data("preview")).removeClass("loading")})},Gallery:function(e){Dropzone.autoDiscover=!1;var t=document.querySelector(e+"-template");t.id="";var a=t.parentNode.innerHTML;t.parentNode.removeChild(t);var o=new Dropzone(e,{url:$(e).data("url"),thumbnailWidth:80,thumbnailHeight:80,parallelUploads:5,previewTemplate:a,paramName:"files",acceptedFiles:$(e).data("types")||".png,.jpg,.jpeg,.gif",autoProcessQueue:!0,previewsContainer:"#previews",clickable:".fileinput-button",dictDefaultMessage:'<span><i class="fa fa-cloud-upload fa-4x"></i><br />Drag and drop files here, or simply click me!</div>',dictResponseError:"Error while uploading file!"});$(e+" .cancel").hide(),o.on("addedfile",function(t){$(t.previewElement.querySelector(".complete")).hide(),$(t.previewElement.querySelector(".cancel")).show(),$(e+" .cancel").show()}),o.on("totaluploadprogress",function(e){document.querySelector("#total-progress .progress-bar").style.width=e+"%"}),o.on("sending",function(e){document.querySelector("#total-progress").style.opacity="1"}),o.on("complete",function(e){$(e.previewElement.querySelector(".cancel")).hide(),$(e.previewElement.querySelector(".progress")).hide(),$(e.previewElement.querySelector(".complete")).show(),$.hood.Inline.Refresh(".gallery")}),o.on("queuecomplete",function(t){document.querySelector("#total-progress").style.opacity="0",$(e+" .cancel").hide()}),o.on("success",function(e,t){$.hood.Inline.Refresh(".gallery"),t.Success?$.hood.Alerts.Success("New images added!"):$.hood.Alerts.Error("There was a problem adding the profile image: "+t.Error)}),document.querySelector(".actions .cancel").onclick=function(){o.removeAllFiles(!0)}}},ColorPickers:function(){var e=function(e,t){var a=$(t._root.button).parent().data("target");$(t._root.button).css({"background-color":e.toHEXA().toString()});for(var o=t.getColor().toHEXA(),r="",l=o.length-1;l>=0;l--)r=o[l]+r;$(a).val("#"+r)},t=[];$(".color-picker").each(function(a,o){var r=Pickr.create({el:o.children[0],appClass:"custom-class",theme:"monolith",useAsButton:!0,defaultRepresentation:"HEXA",position:"bottom-end",components:{opacity:!0,hue:!0,interaction:{hex:!1,rgba:!1,hsva:!1,input:!0,clear:!0}}}).on("init",function(t){var a=$(t._root.button).parent().data("target"),o=$(a).val();$(a).on("click",$.proxy(function(){this.show()},t)),t.setColor(o),e(t.getColor(),t)}).on("clear",function(t){var a=$(t._root.button).parent().data("target");t.setColor("transparent"),e(t.getColor(),t),$(a).val("")}).on("change",e);t.push(r)})}},$(document).ready($.hood.Handlers.Init);