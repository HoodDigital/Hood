"use strict";$.hood||($.hood={}),$.hood.Inline={Init:function(){$(".hood-inline:not(.refresh)").each($.hood.Inline.Load),$("body").on("click",".hood-inline-task",$.hood.Inline.Task),$("body").on("click",".hood-modal",function(o){o.preventDefault(),$.hood.Inline.Modal($(this).attr("href"),$(this).data("complete"))}),$.hood.Inline.DataList.Init()},Refresh:function(o){$(o||".hood-inline").each($.hood.Inline.Load)},Load:function(o){$.hood.Inline.Reload(this)},Reload:function(o){$tag=$(o),$tag.addClass("loading");var n=$tag.data("url");$.get(n,function(o){$tag.html(o),$tag.removeClass("loading")}).done(function(o){$.hood.Inline.RunComplete($tag.data("complete"),o)}).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},Modal:function(o,n){$.get(o,function(o){modalId="#"+$(o).attr("id"),$(o).addClass("hood-inline-modal"),$(modalId).length&&$(modalId).remove(),$("body").append(o),$(modalId).modal(),$(modalId).on("shown.bs.modal",function(){$(document).off("focusin.modal")})}).done(function(o){$.hood.Inline.RunComplete(n,o)}).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},Task:function(o){o.preventDefault(),$tag=$(o.currentTarget),$tag.addClass("loading"),$.get($tag.attr("href"),function(o){o.Success?$.hood.Alerts.Success(o.Message):$.hood.Alerts.Error(o.Errors,o.Message),o.Url&&setTimeout(function(){window.location=o.Url},500),$tag.removeClass("loading")}).done(function(o){$.hood.Inline.RunComplete(complete,o)}).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},DataList:{Init:function(){$(".hood-inline-list.query").each(function(){$(this).data("url",$(this).data("url")+window.location.search)}),$(".hood-inline-list:not(.refresh)").each($.hood.Inline.Load),$("body").on("click",".hood-inline-list .pagination a",function(o){o.preventDefault(),$.hood.Loader(!0);var n=document.createElement("a");n.href=$(this).attr("href"),$list=$(this).parents(".hood-inline-list"),$.hood.Inline.DataList.Reload($list,n)}),$("body").on("submit",".hood-inline-list form",function(o){o.preventDefault(),$.hood.Loader(!0),$form=$(this),$list=$form.parents(".hood-inline-list");var n=document.createElement("a");n.href=$list.data("url"),n.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,n)}),$("body").on("submit","form.inline",function(o){o.preventDefault(),$.hood.Loader(!0),$form=$(this),$list=$($form.data("target"));var n=document.createElement("a");n.href=$list.data("url"),n.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,n)}),$("body").on("change","form.inline .refresh-on-change, .hood-inline-list form",function(o){o.preventDefault(),$.hood.Loader(!0),$form=$(this).parents("form"),$list=$($form.data("target"));var n=document.createElement("a");n.href=$list.data("url"),n.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,n)})},Reload:function(o,n){if(history.pushState&&o.hasClass("query")){var e=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+n.href.substring(n.href.indexOf("?")+1);window.history.pushState({path:e},"",e)}o.data("url",$.hood.Helpers.InsertQueryStringParamToUrl(n,"inline","true")),$.hood.Inline.Reload(o,o.data("complete"))}},HandleError:function(o){500===o.status?$.hood.Alerts.Error("<strong>"+o.status+"</strong>: There was an error processing the content, please contact an administrator if this continues.<br/>"):404===o.status?$.hood.Alerts.Error("<strong>"+o.status+"</strong>: The content could not be found.<br/>"):401===o.status&&$.hood.Alerts.Error("<strong>"+o.status+"</strong>: You are not allowed to view this resource, are you logged in correctly?<br/>")},Finish:function(o){$.hood.Loader(!1)},RunComplete:function RunComplete(complete){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!$.hood.Helpers.IsNullOrUndefined(complete)){var func=eval(complete);"function"==typeof func&&(null!==data?func(data):func())}}},$.hood.Inline.Init(),$.hood.Modals={Open:$.hood.Inline.Modal};