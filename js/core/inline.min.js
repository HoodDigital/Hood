"use strict";$.hood||($.hood={}),$.hood.Inline={Init:function(){$(".hood-inline:not(.refresh)").each($.hood.Inline.Load),$("body").on("click",".hood-inline-task",$.hood.Inline.Task),$.hood.Inline.DataList.Init()},Refresh:function(o){$(o||".hood-inline").each($.hood.Inline.Load)},Load:function(o){$.hood.Inline.Reload(this)},Reload:function(o,e){$tag=$(o),$tag.addClass("loading");var t=$tag.data("url");$.get(t,function(o){$tag.html(o),$tag.removeClass("loading")}).done(function(o){$.hood.Inline.RunComplete(e,o,$tag)}).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},Modal:function(o,e){$.get(o,function(o){modalId="#"+$(o).attr("id"),$(o).addClass("hood-inline-modal"),$(modalId).length&&$(modalId).remove(),$("body").append(o),$(modalId).modal(),$(modalId).on("shown.bs.modal",function(){$(document).off("focusin.modal")})}).done(function(o){$.hood.Inline.RunComplete(e,o)}).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},Task:function(o){o.preventDefault(),$tag=$(o.currentTarget),$tag.addClass("loading"),$.get($tag.attr("href"),function(o){o.Success?$.hood.Alerts.Success(o.Message):$.hood.Alerts.Error(o.Errors,o.Message),o.Url&&setTimeout(function(){window.location=o.Url},500),$tag.removeClass("loading")}).done(function(o){$.hood.Inline.RunComplete(complete,o)}).fail($.hood.Inline.HandleError).always($.hood.Inline.Finish)},DataList:{Init:function(){$(".hood-inline-list.query").each(function(){$(this).data("url",$(this).data("url")+window.location.search)}),$(".hood-inline-list:not(.refresh)").each($.hood.Inline.Load),$("body").on("click",".hood-inline-list .pagination a",function(o){o.preventDefault(),$.hood.Loader(!0);var e=document.createElement("a");e.href=$(this).attr("href"),$list=$(this).parents(".hood-inline-list"),$.hood.Inline.DataList.Reload($list,e)}),$("body").on("submit",".hood-inline-list form",function(o){o.preventDefault(),$.hood.Loader(!0),$form=$(this),$list=$form.parents(".hood-inline-list");var e=document.createElement("a");e.href=$list.data("url"),e.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,e)}),$("body").on("submit","form.inline",function(o){o.preventDefault(),$.hood.Loader(!0),$form=$(this),$list=$($form.data("target"));var e=document.createElement("a");e.href=$list.data("url"),e.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,e)}),$("body").on("change","form.inline .refresh-on-change, .hood-inline-list form",function(o){o.preventDefault(),$.hood.Loader(!0),$form=$(this).parents("form"),$list=$($form.data("target"));var e=document.createElement("a");e.href=$list.data("url"),e.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,e)})},Reload:function(o,e){if(history.pushState&&o.hasClass("query")){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+e.href.substring(e.href.indexOf("?")+1);window.history.pushState({path:t},"",t)}o.data("url",$.hood.Helpers.InsertQueryStringParamToUrl(e,"inline","true")),$.hood.Inline.Reload(o,o.data("complete"))}},HandleError:function(o){500===o.status?$.hood.Alerts.Error("<strong>"+o.status+"</strong>: There was an error processing the content, please contact an administrator if this continues.<br/>"):404===o.status?$.hood.Alerts.Error("<strong>"+o.status+"</strong>: The content could not be found.<br/>"):401===o.status&&$.hood.Alerts.Error("<strong>"+o.status+"</strong>: You are not allowed to view this resource, are you logged in correctly?<br/>")},Finish:function(o){$.hood.Loader(!1)},RunComplete:function RunComplete(complete){var data=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,tag=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;func=$(tag).attr("data-complete"),null!==data?($.hood.Helpers.IsNullOrUndefined(complete)||($.hood.Helpers.IsFunction(complete)?complete():eval(complete+"(data)")),null!==tag&&func&&($.hood.Helpers.IsFunction(complete)?eval($(tag).data("complete")):eval($(tag).data("complete")+"(data)"))):($.hood.Helpers.IsNullOrUndefined(complete)||($.hood.Helpers.IsFunction(complete)?complete():eval(complete+"()")),null!==tag&&func&&($.hood.Helpers.IsFunction(complete)?eval($(tag).data("complete")):eval($(tag).data("complete")+"()")))}},$.hood.Inline.Init(),$.hood.Modals={Open:$.hood.Inline.Modal};