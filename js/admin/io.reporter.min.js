"use strict";$.hood||($.hood={}),$.hood.IO={Reporter:{UpdateInterval:-1,Init:function(){$.hood.IO.Reporter.Update(),$("#runUpdate").click(function(){$.ajax({url:$("#runUpdate").data("start"),type:"POST",error:function(e,r,o){$.hood.IO.Reporter.View.ShowError("There was an error, "+e+"<br />"+r+"<br />"+o)},success:function(e){$.hood.IO.Reporter.Update()}})}),$("#cancel").click(function(){$.ajax({url:$("#runUpdate").data("cancel"),type:"POST",error:function(e,r,o){$.hood.IO.Reporter.View.ShowError("There was an error, "+e+"<br />"+r+"<br />"+o)},success:function(e){$.hood.IO.Reporter.Update()}})})},Update:function(){$.ajax({url:$("#runUpdate").data("update"),type:"POST",error:function(e,r,o){$.hood.IO.Reporter.View.ShowError("There was an error, "+e+"<br />"+r+"<br />"+o)},success:function(e){e.Running?($.hood.IO.Reporter.View.ShowInfo(),clearInterval($.hood.IO.Reporter.UpdateInterval),$.hood.IO.Reporter.UpdateInterval=setTimeout($.hood.IO.Reporter.Update,250)):(clearInterval($.hood.IO.Reporter.UpdateInterval),$.hood.IO.Reporter.View.HideInfo()),$(".tp").html(e.Total),$("#pp").html(e.Processed),$("#pt").html(e.Message),$(".pc").html(Math.round(e.PercentComplete)),e.HasFile?($("#download").show(),$("#download-expire").html(e.ExpireTime),$("#download-file").attr("href",e.Download)):$("#download").hide(),$("#progressbar").css({width:e.PercentComplete+"%"})}})},View:{HideInfo:function(){$("#runUpdate").removeAttr("disabled"),$("#cancel").attr("disabled","disabled"),$("#update-progress").hide()},ShowInfo:function(){$("#cancel").removeAttr("disabled"),$("#runUpdate").attr("disabled","disabled"),$("#update-progress").show()},ShowError:function(e){$("#error").html(e).addClass("alert").addClass("alert-danger").addClass("m-t-lg")}}}},$.hood.IO.Reporter.Init();