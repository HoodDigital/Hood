"use strict";$.hood||($.hood={}),$.hood.IO={Reporter:{UpdateInterval:-1,Init:function(){$("#import-property-start").doesExist()&&($.hood.IO.Reporter.Update(),$("#import-property-start").click(function(){$.ajax({url:$("#import-property-start").data("start"),type:"POST",error:function(r,e,o){$.hood.IO.Reporter.View.ShowError("There was an error, "+r+"<br />"+e+"<br />"+o)},success:function(r){$.hood.IO.Reporter.Update()}})}),$("#import-property-cancel").click(function(){$.ajax({url:$("#import-property-start").data("import-property-cancel"),type:"POST",error:function(r,e,o){$.hood.IO.Reporter.View.ShowError("There was an error, "+r+"<br />"+e+"<br />"+o)},success:function(r){$.hood.IO.Reporter.Update()}})}))},Update:function(){$.ajax({url:$("#import-property-start").data("update"),type:"POST",error:function(r,e,o){$.hood.IO.Reporter.View.ShowError("There was an error, "+r+"<br />"+e+"<br />"+o)},success:function(r){r.Running?($.hood.IO.Reporter.View.ShowInfo(),clearInterval($.hood.IO.Reporter.UpdateInterval),$.hood.IO.Reporter.UpdateInterval=setTimeout($.hood.IO.Reporter.Update,250)):(clearInterval($.hood.IO.Reporter.UpdateInterval),$.hood.IO.Reporter.View.HideInfo()),$(".tp").html(r.Total),$("#pp").html(r.Processed),$("#pt").html(r.Message),$(".pc").html(Math.round(r.PercentComplete)),r.HasFile?($("#download").show(),$("#download-expire").html(r.ExpireTime),$("#download-file").attr("href",r.Download)):$("#download").hide(),$("#progressbar").css({width:r.PercentComplete+"%"})}})},View:{HideInfo:function(){$("#import-property-start").removeAttr("disabled"),$("#import-property-cancel").attr("disabled","disabled"),$("#import-property-progress").hide()},ShowInfo:function(){$("#import-property-cancel").removeAttr("disabled"),$("#import-property-start").attr("disabled","disabled"),$("#import-property-progress").show()},ShowError:function(r){$("#import-property-error-message").html(r).addClass("alert").addClass("alert-danger").addClass("m-t-lg")}}}},$.hood.IO.Reporter.Init();