"use strict";$.hood||($.hood={}),$.hood.Import={Property:{UpdateInterval:-1,Init:function(){$.hood.Import.Property.Update(),$("#runUpdate").click(function(){$.ajax({url:"/admin/property/import/blm/start/",type:"POST",error:function(r,t,o){$.hood.Import.Property.View.ShowError("There was an error, "+r+"<br />"+t+"<br />"+o)},success:function(r){$.hood.Import.Property.Update()},complete:function(){}})}),$("#cancel").click(function(){$.ajax({url:"/admin/property/import/blm/cancel/",type:"POST",error:function(r,t,o){$.hood.Import.Property.View.ShowError("There was an error, "+r+"<br />"+t+"<br />"+o)},success:function(r){$.hood.Import.Property.Update()},complete:function(){}})})},Update:function(){$.ajax({url:"/admin/property/import/blm/status/",type:"POST",error:function(r,t,o){$.hood.Import.Property.View.ShowError("There was an error, "+r+"<br />"+t+"<br />"+o)},success:function(r){if(r.Importer.Running?($.hood.Import.Property.View.ShowInfo(),clearInterval($.hood.Import.Property.UpdateInterval),$.hood.Import.Property.UpdateInterval=setTimeout($.hood.Import.Property.Update,250)):(clearInterval($.hood.Import.Property.UpdateInterval),$.hood.Import.Property.View.HideInfo()),$(".tp").html(r.Importer.Total),$("#pu").html(r.Importer.Updated),$("#pa").html(r.Importer.Added),$("#pp").html(r.Importer.Processed),$("#pd").html(r.Importer.Deleted),$("#ToAdd").html(r.Importer.ToAdd),$("#ToUpdate").html(r.Importer.ToUpdate),$("#ToDelete").html(r.Importer.ToDelete),$("#pt").html(r.Importer.StatusMessage),$("#fp").html(Math.round(100*r.Ftp.Complete)/100),$("#ft").html(r.Ftp.StatusMessage),$(".pc").html(Math.round(100*r.Importer.Complete)/100),$("#progressbar").css({width:r.Importer.Complete+"%"}),r.Importer.Errors.length){for(errorHtml="",i=0;i<r.Importer.Errors.length;i++)errorHtml+='<p class="text-danger">'+r.Importer.Errors[i]+"</p>";$("#Errors").html(errorHtml)}else $("#Errors").html("<p>No errors reported.</p>");if(r.Importer.Warnings.length){for(warningHtml="",i=0;i<r.Importer.Warnings.length;i++)warningHtml+='<p class="text-warning">'+r.Importer.Warnings[i]+"</p>";$("#Warnings").html(warningHtml)}else $("#Warnings").html("<p>No warnings reported.</p>")}})},View:{HideInfo:function(){$("#runUpdate").removeAttr("disabled"),$("#cancel").attr("disabled","disabled"),$("#update-progress").hide()},ShowInfo:function(){$("#cancel").removeAttr("disabled"),$("#runUpdate").attr("disabled","disabled"),$("#update-progress").show()},ShowError:function(r){$("#error").html(r).addClass("alert").addClass("alert-danger").addClass("m-t-lg")}}}},$.hood.Import.Property.Init();