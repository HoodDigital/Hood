"use strict";$.hood||($.hood={}),$.hood.Users={Init:function(){$("body").on("click",".user-delete",$.hood.Users.Delete),$("body").on("click",".user-reset-password",$.hood.Users.Edit.ResetPassword),$("body").on("click",".user-notes-add",$.hood.Users.Edit.Notes.Add),$("body").on("click",".user-notes-delete",$.hood.Users.Edit.Notes.Delete),$("body").on("change","#user-create-form #GeneratePassword",$.hood.Users.Create.GeneratePassword),$("body").on("change",".user-role-check",$.hood.Users.Edit.ToggleRole)},Loaded:function(e){$.hood.Loader(!1)},Reload:function(e){$("#user-list").doesExist()&&$.hood.Inline.Reload($("#user-list"),e)},Delete:function(e){e.preventDefault();var o=$(this),s=function(e){e&&$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Users.Reload(),e.Success&&o&&o.data("redirect")&&($.hood.Alerts.Success("<strong>User deleted, redirecting...</strong><br />Just taking you back to the user list."),setTimeout(function(){window.location=o.data("redirect")},1500))})};$.hood.Alerts.Confirm("The user will be permanently removed, any site content will be reassigned to the ownership of the site owner, any user content (Forum Topics & Posts) will be deleted from the system and all associated media files.","Are you sure?",s,"error",'<span class="text-danger"><i class="fa fa-exclamation-triangle"></i> <strong>This process CANNOT be undone!</strong><br />This process will also cancel any active subscriptions.</span>')},Create:{Loaded:function(e){$("#user-create-form").hoodValidator({validationRules:{FirstName:{required:!0},LastName:{required:!0},UserName:{required:!0,email:!0},Password:{required:!0}},submitButtonTag:$("#user-create-submit"),submitUrl:$("#user-create-form").attr("action"),submitFunction:function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Users.Reload()}})},GeneratePassword:function(){$(this).is(":checked")?($("#user-create-form #Password").val($.hood.Helpers.GenerateRandomString(0)),$("#user-create-form #Password").attr("type","text")):($("#user-create-form #Password").val(""),$("#user-create-form #Password").attr("type","password"))}},Edit:{ResetPassword:function(e){e.preventDefault();var o=$(this),s=function(e){return e!==!1&&(""===e?(swal.showInputError("You didn't supply a new password, we can't reset the password without it!"),!1):void $.post(o.attr("href"),{password:e},function(e){$.hood.Helpers.ProcessResponse(e)}))};$.hood.Alerts.Prompt("Please enter a new password for the user...","Reset password",s)},Notes:{Add:function(e){e.preventDefault();var o=$(this),s=function(e){return e===!1||""===e?(swal.showInputError("You enter anything!"),!1):void $.post(o.attr("href"),{note:e},function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Inline.Reload("#user-notes")})};$.hood.Alerts.Prompt("Enter and store a note about this user. These are internal, and are not shown to the user.","Add a note",s,"textarea")},Delete:function(e){e.preventDefault();var o=$(this),s=function(e){e?$.post(o.attr("href"),function(e){$.hood.Helpers.ProcessResponse(e),$.hood.Inline.Reload("#user-notes")}):swal("Cancelled","It's all good in the hood!","error")};$.hood.Alerts.Confirm("Are you sure?","The note will be removed permanently.",s)}},ToggleRole:function(){$(this).is(":checked")?$.post($(this).data("url"),{role:$(this).val(),add:!0},function(e){$.hood.Helpers.ProcessResponse(e)}):$.post($(this).data("url"),{role:$(this).val(),add:!1},function(e){$.hood.Helpers.ProcessResponse(e)})}}},$(document).ready($.hood.Users.Init);