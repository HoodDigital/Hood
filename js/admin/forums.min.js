"use strict";$.hood||($.hood={}),$.hood.Forum={Init:function(){$("body").on("click",".delete-forum",$.hood.Forum.Delete),$("body").on("click",".create-forum",$.hood.Forum.Create.Init),$("body").on("click",".publish-forum",$.hood.Forum.Publish),$("body").on("click",".archive-forum",$.hood.Forum.Archive),$("body").on("click",".create-forum",$.hood.Forum.Create.Init),$("body").on("click",".edit-forum-category",$.hood.Forum.Categories.Edit),$("body").on("click",".save-forum-category",$.hood.Forum.Categories.Save),$("body").on("click",".add-forum-category",$.hood.Forum.Categories.Add),$("body").on("click",".delete-forum-category",$.hood.Forum.Categories.Delete),$("body").on("change",".forum-category-check",$.hood.Forum.Categories.ToggleCategory),$("body").on("keyup","#Slug",function(){$(".slug-display").html($(this).val())}),$("#edit-forum").doesExist()&&$.hood.Forum.Edit.Init()},Categories:{Edit:function(e){$(this);e.preventDefault(),$.hood.Blades.OpenWithLoader(".edit-forum-category","/admin/forums/categories/edit/"+$(this).data("id"),null)},Save:function(e){$.post("/admin/forums/categories/save/",$("#edit-forum-category-form").serialize(),function(e){e.Success?($.hood.Inline.Reload(".categorylist"),swal({title:"Saved!",text:"The category has been saved.",timer:1300,type:"success"})):swal({title:"Error!",text:"There was a problem saving the category: "+e.Error,timer:1300,type:"error"})})},Add:function(e){$.post("/admin/forums/categories/create/",$("#add-forum-category-form").serialize(),function(e){e.Success?($.hood.Inline.Reload(".categorylist"),swal({title:"Saved!",text:"The category has been added.",timer:1300,type:"success"})):swal({title:"Error!",text:"There was a problem adding the category: "+e.Error,timer:1300,type:"error"})})},ToggleCategory:function(){$(this).is(":checked")?$.post("/admin/forums/categories/add/",{categoryId:$(this).val(),forumId:$(this).data("id")},function(e){e.Success?$.hood.Alerts.Success("Added category."):$.hood.Alerts.Error("Couldn't add the category: "+e.Error)}):$.post("/admin/forums/categories/remove/",{categoryId:$(this).val(),forumId:$(this).data("id")},function(e){e.Success?$.hood.Alerts.Success("Removed category."):$.hood.Alerts.Error("Couldn't add the category: "+e.Error)})},Delete:function(){var e=$(this);swal({title:"Are you sure?",text:"The field will be permanently removed.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, cancel!",closeOnConfirm:!1,showLoaderOnConfirm:!0,closeOnCancel:!1},function(o){o?$.post("/admin/forums/categories/delete/"+e.data("id"),null,function(e){e.Success?($.hood.Inline.Reload(".categorylist"),swal({title:"Deleted!",text:"The field has now been removed from the website.",timer:1300,type:"success"})):swal({title:"Error!",text:"There was a problem deleting the field: "+e.Errors,timer:5e3,type:"error"})}):swal("Cancelled","It's all good in the hood!","error")})}},Delete:function(e){var o=$(this);swal({title:"Are you sure?",text:"The forum will be permanently removed.",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, cancel!",closeOnConfirm:!1,showLoaderOnConfirm:!0,closeOnCancel:!1},function(e){e?$.post("/admin/forums/delete/"+o.data("id"),null,function(e){e.Success?($.hood.Blades.Close(),swal({title:"Deleted!",text:"The forum has now been removed from the website.",timer:1300,type:"success"}),setTimeout(function(){window.location=e.Url},500)):swal({title:"Error!",text:"There was a problem deleting the forum: "+e.Errors,timer:5e3,type:"error"})}):swal("Cancelled","It's all good in the hood!","error")})},Publish:function(e){var o=$(this);swal({title:"Are you sure?",text:"The item will be visible on the website.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, cancel!",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,closeOnCancel:!1},function(e){e?$.post("/admin/forums/publish/"+o.data("id"),null,function(e){e.Success?(swal({title:"Published!",text:"The item has now been published.",timer:1300,type:"success"}),setTimeout(function(){window.location=e.Url},500)):swal({title:"Error!",text:"There was a problem publishing the item: "+e.Errors,timer:5e3,type:"error"})}):swal("Cancelled","It's all good in the hood!","error")})},Archive:function(e){var o=$(this);swal({title:"Are you sure?",text:"The item will be hidden from the website.",type:"warning",confirmButtonColor:"#DD6B55",confirmButtonText:"Yes, go ahead.",cancelButtonText:"No, cancel!",showCancelButton:!0,closeOnConfirm:!1,showLoaderOnConfirm:!0,closeOnCancel:!1},function(e){e?$.post("/admin/forums/archive/"+o.data("id"),null,function(e){e.Success?(swal({title:"Archived!",text:"The item has now been archived.",timer:1300,type:"success"}),setTimeout(function(){window.location=e.Url},500)):swal({title:"Error!",text:"There was a problem archiving the item: "+e.Errors,timer:5e3,type:"error"})}):swal("Cancelled","It's all good in the hood!","error")})},Create:{Init:function(e){$(this);e.preventDefault(),$.hood.Blades.OpenWithLoader("button.create-forum","/admin/forums/create/",$.hood.Forum.Create.SetupCreateForm)},SetupCreateForm:function(){$("#create-forum-form").find(".datepicker").datetimepicker({locale:"en-gb",format:"L"}),$("#create-forum-form").hoodValidator({validationRules:{Title:{required:!0},Description:{required:!0}},submitButtonTag:$("#create-forum-submit"),submitUrl:"/admin/forums/create",submitFunction:function(e){e.Success?(swal("Created!","The forum has now been created!","success"),setTimeout(function(){window.location=e.Url},500)):swal("Error","There was a problem creating the forum:\n\n"+e.Errors,"error")}})}},Edit:{Init:function(){$("#edit-forum-form").find(".datepicker").datetimepicker({locale:"en-gb",format:"L"})}}},$(document).ready($.hood.Forum.Init);