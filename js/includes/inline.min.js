$.hood||($.hood={}),$.hood.Inline={Init:function(){$(".hood-inline:not(.refresh)").each($.hood.Inline.Load),$("body").on("click",".hood-inline-task",$.hood.Inline.Task),$.hood.Inline.DataList.Init()},Refresh:function(){$(".hood-inline").each($.hood.Inline.Load)},Load:function(a){$.hood.Inline.Reload(this)},Reload:function(tag,complete){$(tag).addClass("loading"),params=null,$(tag).attr("data-params")&&(params=eval($(tag).data("params")));var urlLoad=$(tag).data("url");$.get(urlLoad,params,function(data){$(tag).html(data),$.hood.Helpers.IsNullOrUndefined(complete)||($.hood.Helpers.IsFunction(complete)?complete(data):eval(complete+"(data)")),$(tag).attr("data-complete")&&eval($(tag).data("complete")+"(data)")}).fail(function(a){$.hood.Alerts.Error("There was an error loading the inline panel's URL:<br/><strong>"+urlLoad+"</strong>")}).always(function(a){$.hood.Modals.Loading=!1,$(tag).removeClass("loading")})},Task:function(e){$.hood.Loader(!0),e.preventDefault(),$tag=$(e.currentTarget),$tagcontents=$(e.currentTarget).html(),$(e.currentTarget).addClass("loading");var urlLoad=$(e.currentTarget).attr("href");$.get(urlLoad,null,function(data){data.Success?$.hood.Alerts.Success(data.Message):$.hood.Alerts.Error(data.Errors),data.Url&&setTimeout(function(){window.location=data.Url},500),$tag.attr("data-complete")&&eval($tag.data("complete")+"(data)")}).fail(function(a){$.hood.Alerts.Error("There was an error processing the request:<br/><strong>"+urlLoad+"</strong>")}).always(function(a){$.hood.Loader(!1),$.hood.Modals.Loading=!1,$(e.currentTarget).removeClass("loading")})},DataList:{Init:function(){$(".hood-inline-list.query").each(function(){$(this).data("url",$(this).data("url")+window.location.search)}),$(".hood-inline-list:not(.refresh)").each($.hood.Inline.Load),$("body").on("click",".hood-inline-list .pagination a",function(a){a.preventDefault(),$.hood.Loader(!0);var o=document.createElement("a");o.href=$(this).attr("href"),$list=$(this).parents(".hood-inline-list"),$.hood.Inline.DataList.Reload($list,o)}),$("body").on("submit",".hood-inline-list form",function(a){a.preventDefault(),$.hood.Loader(!0),$form=$(this),$list=$form.parents(".hood-inline-list");var o=document.createElement("a");o.href=$list.data("url"),o.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,o)}),$("body").on("submit","form.inline",function(a){a.preventDefault(),$.hood.Loader(!0),$form=$(this),$list=$($form.data("target"));var o=document.createElement("a");o.href=$list.data("url"),o.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,o)}),$("body").on("change","form.inline .refresh-on-change, .hood-inline-list form",function(a){a.preventDefault(),$.hood.Loader(!0),$form=$(this).parents("form"),$list=$($form.data("target"));var o=document.createElement("a");o.href=$list.data("url"),o.search="?"+$form.serialize(),$.hood.Inline.DataList.Reload($list,o)})},Reload:function(a,o){if(history.pushState&&a.hasClass("query")){var t=window.location.protocol+"//"+window.location.host+window.location.pathname+"?"+o.href.substring(o.href.indexOf("?")+1);window.history.pushState({path:t},"",t)}a.data("url",$.hood.Helpers.InsertQueryStringParamToUrl(o,"inline","true")),$.hood.Inline.Reload(a,a.data("complete"))}}},$.hood.Inline.Init();